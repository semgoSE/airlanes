{"version":3,"sources":["panels/Groups.jsx","components/SnackbarError.jsx","panels/GroupInfo.jsx","components/SubscribeCities.jsx","panels/Catalog.jsx","panels/SectionCatalog.jsx","components/MyGroups.jsx","components/MyDB.jsx","components/Load.jsx","panels/MySubs.jsx","panels/Friends.jsx","panels/Settings.jsx","panels/EditSettings.jsx","components/ChooseCity.jsx","components/ChooseCountry.jsx","components/ChooseCountryByContinent.jsx","App.js","serviceWorker.js","index.js"],"names":["Groups","id","state","openCatalog","go","left","onClick","catalog","size","map","item","index","key","expandable","SnakbarError","console","log","this","props","text","onClose","close","before","fill","Component","GroupInfo","subscribeGroup","allowMessages","group","subscribe","snackbar","e","currentTarget","checked","setPopout","bridge","sendPromise","app_id","appId","scope","request_id","then","auth","access_token","method","params","group_id","currentGroup","code","v","data","response","fetch","JSON","stringify","user_id","user","checkbox","setState","catch","SnackbarError","subscribeMessages","screenName","name","domain","tags","a","tagsIn","tagsOut","items","forEach","match","matchAll","length","matchOut","push","matchIn","filter","i","indexOf","obj","groupId","from","tag","to","onChangeGroups","openModal","subscribeMessagesAlert","split","actions","title","autoclose","mode","action","openAlert","description","send","delete","weight","String","json","body","tag_id","check","my_groups","splice","err","source","href","target","height","width","multiline","after","onChange","SubscribeCities","all","updateModalHeight","React","withModalRootContext","Catalog","edit","n","arr","itemsWall","tags_name","element","list","currentCatalog","join","el","is","section","chooseSection","style","fontSize","color","bottom","marginTop","marginLeft","goGroup","SectionCatalog","currentSection","MyGroups","groups","isFetching","deleted","onChangeDelete","findIndex","openConfirm","deleteAll","onChangeCount","t","edit_","tags_obj","onRefresh","arrGroups","arrCategory","category","groupsCategory","group_name","arrG","u","paddingTop","first_name","header","display","res","SEASONS_TRANSCRIPTION","MONTHS_TRANSCRIPTION","0","1","2","3","4","5","6","7","8","9","10","11","12","CONTINENTS","PASSENGERS","url","url1Business","url2Passengers","urlForma","CURRENCY","AZN","BYN","CNY","EUR","KGS","KZT","RUB","THB","UAH","USD","UZS","CURRENCY1","LANGUAGES","de","en","es","fr","it","ru","th","tr","blue","MyDB","DB","remove","parse","output","setTimeout","requests","continentDst","countryDst","cityDst","level","countrySrc","citySrc","dates","year","season","month","dual","forward","passengers","costMin","costMax","currency","interval","updated","limit","language","currencyForUrl","optional","profitability","days","daysOfWeek","every","array","toLowerCase","showAddionalWeather","Load","progress","align","src","vertical","marginBottom","value","MySubs","activeTab","openMenu","marker","countGroups","countDB","selected","paddingBottom","className","Friends","friends","getFriends","fields","city","getPrice","open","friend","cities","myCode","friendCode","indexPrice","Object","keys","date","photo_200","status","caption","country","bdate","online","last_seen","Date","time","toLocaleString","day","hour","minute","last_name","icon","CONTINENT_DST","E","F","D","A","S","N","min","max","Settings","listCountry","datesCnt","getFullYear","activeCnt","randomCost","randomTempDay","randomTempNight","dayTempMin","dayTempMax","onChangeCheck","onChangeFrom","parseInt","addFrom","removeFrom","onChangeDays","allDays","bool","Number","sort_res","citySrcCode","cityDstCode","countryDstCode","countrySrcCode","nighTempMax","nighTempMin","src_name","dst_name","content","searchCountry","type","unshift","nameTranslations","nameCountry","searchCity","nameCity","s","all_flight","top","padding","placeholder","options","search","continent","continentCode","Array","m","getMonth","defaultValue","step","onFocus","EditSettings","cityDstList","citySrcList","form","yearSrc","seasonSrc","monthSrc","nameList","p","border","ChooseCity","inp","default","changeDefaultName","resArr","country_name","onChoose","changeFunction","back","App","activeStory","activePanel","activeModal","popout","sortData","sectionIndex","shift","onStoryChange","dataset","story","modal","chooseGlobal","save_request","choose","chooseAll","submit","concat","window","location","platform","axios","get","defaultCountry","chooseCountryText","calendar","isWebView","tabbar","data-story","dynamicContentHeight","settlingHeight","noShadow","position","textAlign","overflowX","overflowY","backgroundColor","indicator","disabled","lineHeight","onChangeForm","right","IS_PLATFORM_IOS","IS_PLATFORM_ANDROID","paddingLeft","paddingRight","price","origin","destination","departure_at","return_at","Boolean","hostname","ReactDOM","render","document","getElementById","eruda","erudaCode","erudaDom","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.fae7461e.chunk.js","sourcesContent":["import React from 'react'\nimport { Panel, PanelHeader, List, SimpleCell, PanelSpinner, PanelHeaderBack, Div } from '@vkontakte/vkui'\n\nconst Groups = ({ id, state, openCatalog, go }) => (\n  <Panel id={id}>\n    <PanelHeader left={<PanelHeaderBack onClick={() => go('home')} />}>Сообщества</PanelHeader>\n      {state.catalog === null ? \n        <PanelSpinner size='large'/>\n      :\n \n    <List>\n      {\n        state.catalog && (\n          state.catalog.map((item, index) => \n            <SimpleCell\n              key={item.catalog}\n              id={index}\n              expandable\n              onClick={openCatalog}\n            >\n              {item.catalog}\n            </SimpleCell>\n          )\n        )\n          \n       \n      }\n    </List>\n\n    }\n  </Panel>\n)\n\nexport default Groups\n","import React, { Component } from 'react'\r\nimport { render } from '@testing-library/react';\r\nimport { Snackbar } from '@vkontakte/vkui';\r\n\r\nimport Icon24Error from '@vkontakte/icons/dist/24/error';\r\n\r\nexport class SnakbarError extends Component {\r\n    state = {\r\n        \r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(this.props.text);\r\n    }\r\n\r\n    render() {\r\n        return(\r\n        <Snackbar onClose={this.props.close} before={<Icon24Error fill='#FA5728'/>}>{this.props.text ? this.props.text : \"Ошибка интернет-соединения.\"}</Snackbar>\r\n        )\r\n    }\r\n}\r\n \r\nexport default SnakbarError;","import React, { Component } from 'react'\r\nimport { Panel, PanelHeader, PanelHeaderBack, RichCell, SimpleCell, Link, Button, Alert, ScreenSpinner, Div, Text, Switch, PanelSpinner, Group, Header, MiniInfoCell, Placeholder } from '@vkontakte/vkui'\r\nimport SnackbarError from '../components/SnackbarError';\r\nimport Icon28SettingsOutline from '@vkontakte/icons/dist/28/settings_outline';\r\nimport Icon28ViewOutline from '@vkontakte/icons/dist/28/view_outline';\r\nimport Icon28MailOutline from '@vkontakte/icons/dist/28/mail_outline';\r\nimport Icon20CommentOutline from '@vkontakte/icons/dist/20/comment_outline';\r\nimport Icon20GlobeOutline from '@vkontakte/icons/dist/20/globe_outline';\r\nimport Icon20ArticleOutline from '@vkontakte/icons/dist/20/article_outline';\r\nimport Icon20CheckBoxOff from '@vkontakte/icons/dist/20/check_box_off';\r\nimport Icon20CheckBoxOn from '@vkontakte/icons/dist/20/check_box_on';\r\nimport Icon20NarrativeOutline from '@vkontakte/icons/dist/20/narrative_outline';\r\nimport Icon28InfoOutline from '@vkontakte/icons/dist/28/info_outline';\r\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\r\nimport Icon24ViewOutline from '@vkontakte/icons/dist/24/view_outline';\r\nimport Icon20FollowersOutline from '@vkontakte/icons/dist/20/followers_outline';\r\nimport Icon28MessageOutline from '@vkontakte/icons/dist/28/message_outline';\r\nimport Icon28ShareExternalOutline from '@vkontakte/icons/dist/28/share_external_outline';\r\nimport Icon28Notifications from '@vkontakte/icons/dist/28/notifications';\r\nimport Icon28FavoriteOutline from '@vkontakte/icons/dist/28/favorite_outline';\r\nimport Icon24Qr from '@vkontakte/icons/dist/24/qr';\r\n\r\nimport bridge from '@vkontakte/vk-bridge'\r\n\r\n\r\n\r\n\r\nexport class GroupInfo extends Component {\r\n\r\n  state = {\r\n    subscribeGroup: {},\r\n    allowMessages:{},\r\n    group:null,\r\n    subscribe: false,\r\n    snackbar:null\r\n  }\r\n  // Подписка на сообщество\r\n  subscribe = e => {\r\n    if(e.currentTarget.checked) {\r\n    this.props.setPopout(<ScreenSpinner />)\r\n    const { state } = this.props\r\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\r\n      app_id: state.appId,\r\n      scope: \"wall,groups\",\r\n      request_id: 1\r\n    })\r\n    .then(auth => {\r\n      if(auth.access_token && auth.scope === \"wall,groups\"){\r\n        bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\r\n          method: \"groups.getById\",\r\n          request_id: 2,\r\n          params: {\r\n            group_id: this.props.state.currentGroup.code,\r\n            access_token: auth.access_token,\r\n            v: 5.107,\r\n          }\r\n        })\r\n        .then(data => {\r\n          bridge.sendPromise(\"VKWebAppJoinGroup\", {\"group_id\": data.response[0].id})\r\n          .then(() => {\r\n            // Если пользователь подписался, то отправляем запрос \r\n            // на сохранение этих данных\r\n            fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/save-groups\", {\r\n              \"headers\": {\r\n                \"accept\": \"*/*\",\r\n                \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\r\n                \"content-type\": \"application/json;charset=utf-8\",\r\n              },\r\n              \"body\": JSON.stringify({\r\n                user_id: state.user.id,\r\n                app_id: state.appId,\r\n                checkbox: data.response[0].id\r\n              }),\r\n              \"method\": \"POST\",\r\n            })\r\n            .then(() => {\r\n              this.props.setPopout(null);\r\n              this.setState({ subscribe: true })\r\n            })\r\n            .catch(() => {\r\n              this.props.setPopout(null);\r\n              this.setState({ snackbar: <SnackbarError text=\"Ошибка интернет-соеденения\" onClose={() => this.setState({ snackbar: null})} />})\r\n            })\r\n          })\r\n          .catch(() => {\r\n            this.props.setPopout(null);\r\n            this.setState({ snackbar: <SnackbarError text=\"Вы не подписались на группу.\" onClose={() => this.setState({ snackbar: null})} />}) \r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.props.setPopout(null);\r\n          this.setState({ snackbar: <SnackbarError text=\"Ошибка получения группы\" onClose={() => this.setState({ snackbar: null})} />})\r\n        })\r\n      }\r\n    })\r\n    .catch(() => {\r\n      this.props.setPopout(null);\r\n      this.setState({ snackbar: <SnackbarError text=\"Ошибка получения токена\" onClose={() => this.setState({ snackbar: null})} />})\r\n    })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\r\n      app_id: this.props.state.appId,\r\n      scope:\"\",\r\n      request_id: 1\r\n    })\r\n    .then((auth) => {\r\n      bridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"groups.isMember\", \"params\": {\"group_id\": this.props.state.currentGroup.code, \"user_id\":this.props.state.user.id, \"v\": \"5.120\", \"access_token\":auth.access_token}})\r\n      .then((response) => {\r\n        console.log(response)\r\n        bridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"groups.getById\", \"params\": {\"group_id\": this.props.state.currentGroup.code,\"fields\":\"description\", \"v\": \"5.120\", \"access_token\":auth.access_token}})\r\n        .then((data) => {\r\n          console.log(data)\r\n          this.setState({group: data.response[0], subscribe:(response.response == 1)});\r\n        });\r\n      });\r\n\r\n\r\n    })\r\n\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  // Запрос на сообщения\r\n  subscribeMessages = (screenName, name) => {\r\n    const { state } = this.props\r\n    this.props.setPopout(<ScreenSpinner />)\r\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\r\n      app_id: state.appId,\r\n      scope: \"wall,groups\",\r\n      request_id: 1\r\n    })\r\n    .then(auth => {\r\n      if(auth.access_token && auth.scope === \"wall,groups\"){\r\n        bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\r\n          method: \"groups.getById\",\r\n          request_id: 2,\r\n          params: {\r\n            group_id: screenName,\r\n            access_token: auth.access_token,\r\n            v: 5.107,\r\n          }\r\n        })\r\n        .then(data => {\r\n          bridge.sendPromise(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": data.response[0].id, \"key\": \"dBuBKe1kFcdemzB\"})\r\n          .then(() => {\r\n            bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\r\n              method: \"wall.get\",\r\n              request_id: 2,\r\n              params: {\r\n                domain: screenName,\r\n                access_token: auth.access_token,\r\n                v: 5.107,\r\n              }\r\n            })\r\n            .then(async tags => {\r\n              let tagsIn = [];\r\n              let tagsOut = [];\r\n              let itemsWall = tags.response.items;\r\n              itemsWall.forEach((group) => {\r\n                let match = [...group.text.matchAll(/(#.*@.*)/g)];\r\n                if (match.length) {\r\n                  if (match.length > 2) {\r\n                    let matchOut = match[2];\r\n                    tagsOut.push(matchOut)\r\n                }\r\n                let matchIn = match[0];\r\n                tagsIn.push(matchIn)\r\n                }\r\n              });\r\n              tagsIn = tagsIn.map((item) => \r\n                item[0]\r\n              )\r\n              tagsIn = tagsIn.filter((v,i) => tagsIn.indexOf(v) === i)\r\n              tagsOut = tagsOut.map((item) => \r\n                item[0]\r\n              )\r\n              tagsOut = tagsOut.filter((v,i) => tagsOut.indexOf(v) === i)\r\n              let obj = {\r\n                name:name,\r\n                screenName,\r\n                id:null,\r\n                groupId:data.response[0].id, \r\n                from:tagsOut.map((item) => {\r\n                  return {\r\n                    tag: item,\r\n                    checked: false\r\n                  }\r\n                }),\r\n                to:tagsIn.map((item) => {\r\n                  return {\r\n                    tag: item,\r\n                    checked: false\r\n                  }\r\n                })\r\n\r\n              }\r\n              this.props.onChangeGroups('obj', obj);\r\n              this.props.openModal('subscribeCities')\r\n              this.props.setPopout(null) \r\n              \r\n            })\r\n            .catch(() => {\r\n              this.props.setPopout(null)\r\n              this.setState({ snackbar: <SnackbarError text=\"Ошибка получения записей\" onClose={() => this.setState({ snackbar: null})} />})\r\n            })\r\n          })\r\n          .catch(() => {\r\n            this.props.setPopout(null)\r\n            this.setState({ snackbar: <SnackbarError text=\"Вы не разрешили сообщения\" onClose={() => this.setState({ snackbar: null})} />})\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.props.setPopout(null)\r\n          this.setState({ snackbar: <SnackbarError text=\"Ошибка получения группы\" onClose={() => this.setState({ snackbar: null})} />})\r\n        })\r\n      }\r\n    })\r\n    .catch(() => {\r\n      this.props.setPopout(null)\r\n      this.setState({ snackbar: <SnackbarError text=\"Ошибка получения токена\" onClose={() => this.setState({ snackbar: null})} />})\r\n    })\r\n  }\r\n\r\n  // Предупреждение с информацией\r\n  subscribeMessagesAlert = e => {\r\n    const screenName = e.currentTarget.id.split(\"com/\")[1]\r\n    const name = e.currentTarget.name\r\n    this.props.setPopout(\r\n      <Alert\r\n        actions={[{\r\n          title: 'Отмена',\r\n          autoclose: true,\r\n          mode: 'cancel'\r\n        }, {\r\n          title: 'Разрешить',\r\n          autoclose: true,\r\n          action: () => this.subscribeMessages(screenName, name),\r\n        }]}\r\n        onClose={() => this.props.setPopout(null)}\r\n      >\r\n        <p>Вы можете получать со стены сообщества в личные сообщения только те авиабилеты, которые Вам интересны. Для этого разрешите сейчас сообщения в сообществе и выберите города прилета из списка.</p>\r\n      </Alert>\r\n    )\r\n  }\r\n\r\n  openAlert = (item, e) => {\r\n    if(e.currentTarget.checked) {\r\n      this.subscribeMessages(item.code, item.description);\r\n    }else {\r\n      this.props.setPopout(<ScreenSpinner />)\r\n      bridge.sendPromise(\"VKWebAppGetAuthToken\", {\r\n        app_id: this.props.state.appId,\r\n        scope:\"\",\r\n        request_id: 1\r\n      })\r\n      .then((auth) => {\r\n          bridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"groups.getById\", \"params\": {\"group_id\": item.code,\"fields\":\"description\", \"v\": \"5.120\", \"access_token\":auth.access_token}})\r\n          .then((data) => {\r\n            console.log(data);\r\n            this.props.setPopout(\r\n              <Alert\r\n                actions={[{\r\n                  title: 'Отмена',\r\n                  autoclose: true,\r\n                  mode: 'cancel'\r\n                }, {\r\n                  title: 'Удалить',\r\n                  autoclose: true,\r\n                  mode:'destructive',\r\n                  action: () => this.delete(item.code),\r\n                }]}\r\n                onClose={() => this.props.setPopout(null)}\r\n              >\r\n                <Text weight='regular'>Удалить все подписки в личные сообщения из сообщества <b>\"{data.response[0].name}\"</b>?</Text>\r\n              </Alert>\r\n            )\r\n          });\r\n   });\r\n  }\r\n}\r\n\r\n  delete = (code) => {\r\n    this.props.setPopout(<ScreenSpinner />);\r\n    fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-tags\", {\r\n      \"headers\": {\r\n        \"accept\": \"*/*\",\r\n        \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\r\n        \"content-type\": \"application/json;charset=utf-8\",\r\n      },\r\n      \"body\": JSON.stringify({\r\n        user_id: String(this.props.state.user.id)\r\n      }),\r\n      \"method\": \"POST\",\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      let arrCategory = [];\r\n      let arr = [];\r\n      data.tags.forEach(tag => {\r\n        if(tag.body.split('@')[1] == code) {\r\n          fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/remove-tag\", {\r\n            \"headers\": {\r\n              \"accept\": \"*/*\",\r\n              \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\r\n              \"content-type\": \"application/json;charset=utf-8\",\r\n            },\r\n            \"referrer\": \"https://appvk.flights.ru/\",\r\n            \"referrerPolicy\": \"no-referrer-when-downgrade\",\r\n            \"body\": JSON.stringify({tag_id:tag.id, user_id:this.props.state.user.id}),\r\n            \"method\": \"POST\",\r\n          })\r\n          .then(response => response.json())\r\n          .then(check => {\r\n            if(check.response === 'ok'){\r\n            }\r\n          })\r\n        }\r\n      }  \r\n      );\r\n      this.props.state.my_groups.splice(this.props.state.my_groups.indexOf(code), 1);\r\n      console.log(this.props.state.my_groups.indexOf(code), arr)\r\n      this.props.setPopout(null);\r\n    }).catch(err => {\r\n      this.props.setPopout(null)\r\n      this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})}/>, data:'error'})\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      state,\r\n      go,\r\n    } = this.props\r\n\r\n    const { group, subscribe } = this.state;\r\n    return (\r\n      <Panel id={id}>\r\n        <PanelHeader\r\n          left={\r\n            <PanelHeaderBack onClick={() => this.props.onChangeGroups('activePanel',state.currentGroup.source)} />\r\n          }\r\n        >{group && group.name}</PanelHeader>\r\n        {\r\n          group == null ? <PanelSpinner /> : (\r\n          <div>  \r\n            <SimpleCell before={<Icon24ViewOutline fill='var(--accent)' />}>\r\n              <Link href={\"https://vk.com/\"+state.currentGroup.code} target=\"_blank\">Перейти в сообщество</Link>\r\n            </SimpleCell>\r\n            <SimpleCell before={<Icon20FollowersOutline height={24} width={24} fill={!subscribe ? '#4BBDE7' : '#0E62F1'}/>} multiline after={<Switch checked={subscribe} onChange={this.subscribe}/>}>\r\n              Добавить дешевые авиабилеты в ленту новостей\r\n            </SimpleCell>\r\n          <SimpleCell before={<Icon28MessageOutline height={24} width={24} fill={state.my_groups.indexOf(state.currentGroup.code) === -1 ? '#4BBDE7' : '#0E62F1'}/>} multiline  after={<Switch onChange={(e) => this.openAlert(state.currentGroup, e)} checked={state.my_groups.indexOf(state.currentGroup.code) !== -1} />}>\r\n              Присылать в личные сообщения по выбору\r\n            </SimpleCell>\r\n\r\n            <SimpleCell before={<Icon28ShareExternalOutline height={24} width={24} fill='var(--accent)' />}>\r\n              <Link>Поделиться с друзьями</Link>\r\n            </SimpleCell>\r\n\r\n            <SimpleCell before={<Icon28Notifications height={24} width={24} />} after={<Switch />}>\r\n              Уведомлять о записях\r\n            </SimpleCell>\r\n\r\n            <SimpleCell before={<Icon28FavoriteOutline height={24} width={24} />} after={<Switch />}>\r\n              Сохранить в закладках\r\n            </SimpleCell>\r\n\r\n            <SimpleCell before={<Icon24Qr height={24} width={24} fill='var(--accent)' />}>\r\n              <Link>Открыть QR</Link>\r\n            </SimpleCell>\r\n\r\n            {this.state.snackbar}\r\n          </div>\r\n          ) \r\n        }\r\n      </Panel>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GroupInfo\r\n","import React from 'react'\nimport { Div, Checkbox, Title, FormLayout, Switch, Cell, ScreenSpinner, ModalPage, withModalRootContext } from '@vkontakte/vkui'\n\nexport class SubscribeCities extends React.Component {\n  state = {\n    from: null,\n    to: null,\n    all:false,\n  }\n\n  componentDidMount() {\n    this.setState({ from: this.props.state.obj.from, to: this.props.state.obj.to })\n    this.props.updateModalHeight();\n  }\n\n\n\n\n  render() {\n    const {\n      from,\n      to,\n      all\n    } = this.state\n    const {\n      id,\n      close,\n      state\n    } = this.props\n    return (\n    \n<div />\n      \n\n    )\n  }\n}\nexport default withModalRootContext(SubscribeCities);\n\n","import React, { Component } from 'react'\nimport { Panel, PanelHeader, PanelHeaderBack, RichCell, SimpleCell, Link, Button, Alert, ScreenSpinner, Div, Avatar, Switch, Text } from '@vkontakte/vkui'\nimport Icon28SettingsOutline from '@vkontakte/icons/dist/28/settings_outline';\nimport Icon28ViewOutline from '@vkontakte/icons/dist/28/view_outline';\nimport Icon28MailOutline from '@vkontakte/icons/dist/28/mail_outline';\nimport Icon28UserAddOutline from '@vkontakte/icons/dist/28/user_add_outline';\nimport Icon28CheckCircleOutline from '@vkontakte/icons/dist/28/check_circle_outline';\nimport Icon28HelpOutline from '@vkontakte/icons/dist/28/help_outline';\nimport Icon28AddSquareOutline from '@vkontakte/icons/dist/28/add_square_outline';\nimport Icon28CheckSquareOutline from '@vkontakte/icons/dist/28/check_square_outline';\nimport bridge from '@vkontakte/vk-bridge'\nimport SubscribeCities from '../components/SubscribeCities'\nimport SnackbarError from '../components/SnackbarError';\nimport { VKMiniAppAPI } from '@vkontakte/vk-mini-apps-api'\n\n\n\nexport class Catalog extends Component {\n\n  state = {\n    subscribeGroup: {},\n    allowMessages:{},\n \n  }\n  // Подписка на сообщество\n  subscribe = screenName => {\n    this.props.setPopout(<ScreenSpinner />);\n    const { state } = this.props\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n      app_id: state.appId,\n      scope: \"wall,groups\",\n      request_id: 1\n    })\n    .then(auth => {\n      if(auth.access_token && auth.scope === \"wall,groups\"){\n        bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n          method: \"groups.getById\",\n          request_id: 2,\n          params: {\n            group_id: screenName,\n            access_token: auth.access_token,\n            v: 5.107,\n          }\n        })\n        .then(data => {\n          bridge.sendPromise(\"VKWebAppJoinGroup\", {\"group_id\": data.response[0].id})\n          .then(() => {\n            // Если пользователь подписался, то отправляем запрос \n            // на сохранение этих данных\n            fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/save-groups\", {\n              \"headers\": {\n                \"accept\": \"*/*\",\n                \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n                \"content-type\": \"application/json;charset=utf-8\",\n              },\n              \"body\": JSON.stringify({\n                user_id: state.user.id,\n                app_id: state.appId,\n                checkbox: data.response[0].id\n              }),\n              \"method\": \"POST\",\n            }).then((response) => response.json)\n              .then((response) => {\n                let obj = {...this.state.subscribeGroup, [screenName]:true};\n                \n                this.setState({subscribeGroup: obj})\n                this.props.setPopout(null);\n              })\n              .catch(() => this.props.setPopout(null));\n          }).catch(() => this.props.setPopout(null));\n        }).catch(() => this.props.setPopout(null));\n      }\n    }).catch(() => this.props.setPopout(null));\n  }\n\n  componentDidMount() {\n    let list = this.props.state.catalog[this.props.state.currentCatalog].to.map((item) => item.code).join(',');\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n      app_id: this.props.state.appId,\n      scope:\"\",\n      request_id: 1\n    })\n    .then((data) => {\n      bridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"execute.getSubscribeGroup\", \"params\": {\"list\": list, \"v\": \"5.120\", \"access_token\":data.access_token}})\n      .then((response) => {\n        let obj = {};\n        response.response.forEach((el) => { \n          obj[el.name] = (el.is == 1);\n        })\n        console.log(obj)\n        this.setState({subscribeGroup: obj});\n      });\n\n    })\n\n\n\n\n\n\n  }\n\n  // Запрос на сообщения\n  subscribeMessages = (screenName, name) => {\n    const { state } = this.props\n    this.props.setPopout(<ScreenSpinner />)\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n      app_id: state.appId,\n      scope: \"wall,groups\",\n      request_id: 1\n    })\n    .then(auth => {\n      if(auth.access_token && auth.scope === \"wall,groups\"){\n        bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n          method: \"groups.getById\",\n          request_id: 2,\n          params: {\n            group_id: screenName,\n            access_token: auth.access_token,\n            v: 5.107,\n          }\n        })\n        .then(data => {\n          bridge.sendPromise(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": data.response[0].id, \"key\": \"dBuBKe1kFcdemzB\"})\n          .then(() => {\n            bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n              method: \"wall.get\",\n              request_id: 2,\n              params: {\n                domain: screenName,\n                access_token: auth.access_token,\n                v: 5.107,\n              }\n            })\n            .then(async tags => {\n              let tagsIn = [];\n              let tagsOut = [];\n              let itemsWall = tags.response.items;\n              itemsWall.forEach((group) => {\n                let match = [...group.text.matchAll(/(#.*@.*)/g)];\n                if (match.length) {\n                  if (match.length > 2) {\n                    let matchOut = match[2];\n                    tagsOut.push(matchOut)\n                }\n                let matchIn = match[0];\n                tagsIn.push(matchIn)\n                }\n              });\n              tagsIn = tagsIn.map((item) => \n                item[0]\n              )\n              tagsIn = tagsIn.filter((v,i) => tagsIn.indexOf(v) === i)\n              tagsOut = tagsOut.map((item) => \n                item[0]\n              )\n              tagsOut = tagsOut.filter((v,i) => tagsOut.indexOf(v) === i)\n              let obj = {\n                name:name,\n                screenName:screenName,\n                id:null,\n                groupId:data.response[0].id, \n                from:tagsOut.map((item) => {\n                  return {\n                    tag: item,\n                    checked: false\n                  }\n                }),\n                to:tagsIn.map((item) => {\n                  return {\n                    tag: item,\n                    checked: false\n                  }\n                })\n\n              }\n              this.props.onChangeGroups('obj', obj);\n              this.props.openModal('subscribeCities')\n              this.props.setPopout(null) \n              \n            })\n            .catch(() => this.props.setPopout(null))\n          })\n          .catch(() => this.props.setPopout(null))\n        })\n        .catch(() => this.props.setPopout(null))\n      }\n    })\n    .catch(() => this.props.setPopout(null))\n  }\n\n  edit = (item, n) => {\n    let name = item.description;\n    let screenName = item.code;\n    const { state } = this.props\n    this.props.setPopout(<ScreenSpinner />)\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n      app_id: state.appId,\n      scope: \"wall,groups\",\n      request_id: 1\n    })\n    .then(auth => {\n      if(auth.access_token && auth.scope === \"wall,groups\"){\n        bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n          method: \"groups.getById\",\n          request_id: 2,\n          params: {\n            group_id: screenName,\n            access_token: auth.access_token,\n            v: 5.107,\n          }\n        })\n        .then(data => {\n          bridge.sendPromise(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": data.response[0].id, \"key\": \"dBuBKe1kFcdemzB\"})\n          .then(() => {\n            bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n              method: \"wall.get\",\n              request_id: 2,\n              params: {\n                domain: screenName,\n                access_token: auth.access_token,\n                v: 5.107,\n              }\n            })\n            .then(tags => {\n              fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-tags\", {\n                \"headers\": {\n                  \"accept\": \"*/*\",\n                  \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n                  \"content-type\": \"application/json;charset=utf-8\",\n                },\n                \"body\": JSON.stringify({\n                  user_id: String(this.props.state.user.id)\n                }),\n                \"method\": \"POST\",\n              })\n              .then(response => response.json())\n              .then(arr => {\n                let tagsIn = [];\n                let tagsOut = [];\n                let itemsWall = tags.response.items;\n                let tags_obj = arr.tags.filter(element => { if(element.body.split('@')[1] ===  screenName) { return true; }});\n                let tags_name = arr.tags.map(e => { return e.body});\n                console.log(tags_name);\n                itemsWall.forEach((group) => {\n                  let match = [...group.text.matchAll(/(#.*@.*)/g)];\n                  if (match.length) {\n                    if (match.length > 2) {\n                      let matchOut = match[2];\n                      tagsOut.push(matchOut)\n                  }\n                  let matchIn = match[0];\n                  tagsIn.push(matchIn)\n                  }\n                });\n                tagsIn = tagsIn.map((item) => \n                  item[0]\n                )\n                tagsIn = tagsIn.filter((v,i) => tagsIn.indexOf(v) === i)\n                tagsOut = tagsOut.map((item) => \n                  item[0]\n                )\n                tagsOut = tagsOut.filter((v,i) => tagsOut.indexOf(v) === i)\n                let obj = {\n                  name:name,\n                  \n                  groupId:data.response[0].id, \n                  from:tagsOut.map((item) => {\n                    return {\n                      tag: item,\n                      checked: tags_name.indexOf(item) !== -1\n                    }\n                  }),\n                  to:tagsIn.map((item) => {\n                    return {\n                      tag: item,\n                      checked: tags_name.indexOf(item) !== -1\n                    }\n                  })\n                }\n\n                this.props.onChangeGroups('obj', obj);\n                this.props.openModal('subscribeCities');\n                this.props.setPopout(null);\n              }).catch(err => {\n                this.props.setPopout(null)\n                console.log(err)\n                this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})}/>, data:'error'})\n              })\n            })\n            .catch((err) => {this.props.setPopout(null); console.log('1')})\n          })\n          .catch((err) => {this.props.setPopout(null); console.log('2')})\n        })\n        .catch((err) => {this.props.setPopout(null); console.log('3')})\n      }\n    })\n    .catch(() => {this.props.setPopout(null); console.log('4')})\n  }\n\n\n  // Предупреждение с информацией\n  openAlert = (item, e) => {\n    if(e.currentTarget.checked) {\n      this.subscribeMessages(item.code, item.description);\n    }else {\n      this.props.setPopout(<ScreenSpinner />)\n      bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n        app_id: this.props.state.appId,\n        scope:\"\",\n        request_id: 1\n      })\n      .then((auth) => {\n          bridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"groups.getById\", \"params\": {\"group_id\": item.code,\"fields\":\"description\", \"v\": \"5.120\", \"access_token\":auth.access_token}})\n          .then((data) => {\n            console.log(data);\n            this.props.setPopout(\n              <Alert\n                actions={[{\n                  title: 'Отмена',\n                  autoclose: true,\n                  mode: 'cancel'\n                }, {\n                  title: 'Удалить',\n                  autoclose: true,\n                  mode:'destructive',\n                  action: () => this.delete(item.code),\n                }]}\n                onClose={() => this.props.setPopout(null)}\n              >\n                <Text weight=\"regular\">Удалить все подписки в личные сообщения из сообщества <b>\"{data.response[0].name}\"</b>?</Text>\n              </Alert>\n            )\n          });\n   });\n  }\n}\n  \n\n  delete = (code) => {\n    this.props.setPopout(<ScreenSpinner />);\n    fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-tags\", {\n      \"headers\": {\n        \"accept\": \"*/*\",\n        \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n        \"content-type\": \"application/json;charset=utf-8\",\n      },\n      \"body\": JSON.stringify({\n        user_id: String(this.props.state.user.id)\n      }),\n      \"method\": \"POST\",\n    })\n    .then(response => response.json())\n    .then(data => {\n      let arrCategory = [];\n      let arr = [];\n      data.tags.forEach(tag => {\n        if(tag.body.split('@')[1] == code) {\n          fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/remove-tag\", {\n            \"headers\": {\n              \"accept\": \"*/*\",\n              \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n              \"content-type\": \"application/json;charset=utf-8\",\n            },\n            \"referrer\": \"https://appvk.flights.ru/\",\n            \"referrerPolicy\": \"no-referrer-when-downgrade\",\n            \"body\": JSON.stringify({tag_id:tag.id, user_id:this.props.state.user.id}),\n            \"method\": \"POST\",\n          })\n          .then(response => response.json())\n          .then(check => {\n            if(check.response === 'ok'){\n            }\n          })\n        }\n      }  \n      );\n      this.props.state.my_groups.splice(this.props.state.my_groups.indexOf(code), 1);\n      console.log(this.props.state.my_groups.indexOf(code), arr)\n      this.props.setPopout(null);\n    }).catch(err => {\n      this.props.setPopout(null)\n      this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})}/>, data:'error'})\n    })\n  }\n\n  render() {\n    const {\n      id,\n      state,\n      go,\n    } = this.props\n    return (\n      <Panel id={id}>\n        <PanelHeader\n          left={\n            <PanelHeaderBack onClick={() => go(\"groups\")} />\n          }\n        >{state.catalog[state.currentCatalog].catalog}</PanelHeader>\n\n        {\n          state.catalog && (\n            state.catalog[state.currentCatalog].to.map((item, index) => \n              item.section ? \n                <SimpleCell\n                  key={index}\n                  expandable\n                  id={index}\n                  onClick={this.props.chooseSection}\n                >\n                  <Link>{item.section}</Link>\n                </SimpleCell>\n              :\n              <div>\n              <RichCell\n                key={index}\n                multiline\n                actions={this.state.subscribeGroup[item.code] && state.my_groups.indexOf(item.code) !== -1 ? <span style={{ fontSize:12, color:'var(--dynamic_gray)'}}>{this.state.subscribeGroup[item.code] && \"добавлено в новостную ленту\"}<br /> {state.my_groups.indexOf(item.code) !== -1 && \"добавлено в личные сообщения\"}</span>:null}\n                bottom={\n                  <div style={{ marginTop: 8 }}>\n                    <Link href={\"https://vk.com/\"+item.code} target=\"_blank\"><Icon28ViewOutline fill=\"#4BBDE7\"/></Link>\n                    <Link style={{ marginLeft:10 }}>{<Icon28UserAddOutline fill={!this.state.subscribeGroup[item.code] ? \"#4BBDE7\": '#0E62F1'} onClick={() => {if(!this.state.subscribeGroup[item.code]) this.subscribe(item.code)}} />}</Link>\n                    <Link style={{ marginLeft:10 }}>{<Icon28SettingsOutline fill={state.my_groups.indexOf(item.code) === -1 ? '#4BBDE7' : '#0E62F1'} onClick={() => {if(state.my_groups.indexOf(item.code) === -1) this.subscribeMessages(item.code, item.description); else this.edit(item)}} />}</Link>\n                    <Link style={{ marginLeft:10 }}><Icon28HelpOutline fill=\"#4BBDE7\" onClick={() => this.props.goGroup({...item, source:'catalog'})}/></Link>\n                  </div>\n                }\n                \n                after={<Switch onChange={(e) => this.openAlert(item, e)} checked={state.my_groups.indexOf(item.code) !== -1 }/>}\n              >\n                {item.description}\n              </RichCell>\n\n              </div>\n            )\n          )\n        }\n\n      </Panel>\n    )\n  }\n}\n\nexport default Catalog\n","import React, { Component } from 'react'\nimport { Panel, PanelHeader, PanelHeaderBack, Switch, Link, RichCell, Header, ScreenSpinner, Alert, Div, Avatar, Text } from '@vkontakte/vkui'\nimport Icon28SettingsOutline from '@vkontakte/icons/dist/28/settings_outline';\nimport Icon28ViewOutline from '@vkontakte/icons/dist/28/view_outline';\nimport Icon28MailOutline from '@vkontakte/icons/dist/28/mail_outline';\nimport Icon28UserAddOutline from '@vkontakte/icons/dist/28/user_add_outline';\nimport Icon28CheckCircleOutline from '@vkontakte/icons/dist/28/check_circle_outline';\nimport Icon28HelpOutline from '@vkontakte/icons/dist/28/help_outline';\nimport Icon28AddSquareOutline from '@vkontakte/icons/dist/28/add_square_outline';\nimport Icon28CheckSquareOutline from '@vkontakte/icons/dist/28/check_square_outline';\nimport bridge from '@vkontakte/vk-bridge'\nimport SubscribeCities from '../components/SubscribeCities'\nimport SnackbarError from '../components/SnackbarError';\n\nexport class SectionCatalog extends Component {\n\n    state = {\n      my_groups:this.props.state.my_groups,\n      subscribeGroup: {},\n      allowMessages:{},\n    }\n\n    subscribe = screenName => {\n      this.props.setPopout(<ScreenSpinner />);\n      const { state } = this.props\n      bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n        app_id: state.appId,\n        scope: \"wall,groups\",\n        request_id: 1\n      })\n      .then(auth => {\n        if(auth.access_token && auth.scope === \"wall,groups\"){\n          bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n            method: \"groups.getById\",\n            request_id: 2,\n            params: {\n              group_id: screenName,\n              access_token: auth.access_token,\n              v: 5.107,\n            }\n          })\n          .then(data => {\n            bridge.sendPromise(\"VKWebAppJoinGroup\", {\"group_id\": data.response[0].id})\n            .then(() => {\n              // Если пользователь подписался, то отправляем запрос \n              // на сохранение этих данных\n              fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/save-groups\", {\n                \"headers\": {\n                  \"accept\": \"*/*\",\n                  \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n                  \"content-type\": \"application/json;charset=utf-8\",\n                },\n                \"body\": JSON.stringify({\n                  user_id: state.user.id,\n                  app_id: state.appId,\n                  checkbox: data.response[0].id\n                }),\n                \"method\": \"POST\",\n              }).then((response) => response.json)\n                .then((response) => {\n                  let obj = {...this.state.subscribeGroup, [screenName]:true};\n                  \n                  this.setState({subscribeGroup: obj})\n                  this.props.setPopout(null);\n                })\n                .catch(() => this.props.setPopout(null));\n            }).catch(() => this.props.setPopout(null));\n          }).catch(() => this.props.setPopout(null));\n        }\n      }).catch(() => this.props.setPopout(null));\n    }\n  \n    componentDidMount() {\n      \n      let list = this.props.state.catalog[this.props.state.currentCatalog].to[this.props.state.currentSection].arr.map((item) => item.code).join(',');\n      bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n        app_id: this.props.state.appId,\n        scope:\"\",\n        request_id: 1\n      })\n      .then((data) => {\n        bridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"execute.getSubscribeGroup\", \"params\": {\"list\": list, \"v\": \"5.120\", \"access_token\":data.access_token}})\n        .then((response) => {\n          let obj = {};\n          response.response.forEach((el) => { \n            obj[el.name] = (el.is == 1);\n          })\n          console.log(obj)\n          this.setState({subscribeGroup: obj});\n        });\n  \n      })\n  \n  \n  \n  \n  \n  \n    }\n  \n    // Запрос на сообщения\n    subscribeMessages = (screenName, name) => {\n      const { state } = this.props\n      this.props.setPopout(<ScreenSpinner />)\n      bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n        app_id: state.appId,\n        scope: \"wall,groups\",\n        request_id: 1\n      })\n      .then(auth => {\n        if(auth.access_token && auth.scope === \"wall,groups\"){\n          bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n            method: \"groups.getById\",\n            request_id: 2,\n            params: {\n              group_id: screenName,\n              access_token: auth.access_token,\n              v: 5.107,\n            }\n          })\n          .then(data => {\n            bridge.sendPromise(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": data.response[0].id, \"key\": \"dBuBKe1kFcdemzB\"})\n            .then(() => {\n              bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n                method: \"wall.get\",\n                request_id: 2,\n                params: {\n                  domain: screenName,\n                  access_token: auth.access_token,\n                  v: 5.107,\n                }\n              })\n              .then(async tags => {\n                let tagsIn = [];\n                let tagsOut = [];\n                let itemsWall = tags.response.items;\n                itemsWall.forEach((group) => {\n                  let match = [...group.text.matchAll(/(#.*@.*)/g)];\n                  if (match.length) {\n                    if (match.length > 2) {\n                      let matchOut = match[2];\n                      tagsOut.push(matchOut)\n                  }\n                  let matchIn = match[0];\n                  tagsIn.push(matchIn)\n                  }\n                });\n                tagsIn = tagsIn.map((item) => \n                  item[0]\n                )\n                tagsIn = tagsIn.filter((v,i) => tagsIn.indexOf(v) === i)\n                tagsOut = tagsOut.map((item) => \n                  item[0]\n                )\n                tagsOut = tagsOut.filter((v,i) => tagsOut.indexOf(v) === i)\n                let obj = {\n                  name:name,\n                  screenName:screenName,\n                  id:null,\n                  groupId:data.response[0].id, \n                  from:tagsOut.map((item) => {\n                    return {\n                      tag: item,\n                      checked: false\n                    }\n                  }),\n                  to:tagsIn.map((item) => {\n                    return {\n                      tag: item,\n                      checked: false\n                    }\n                  })\n  \n                }\n                this.props.onChangeGroups('obj', obj);\n                this.props.openModal('subscribeCities')\n                this.props.setPopout(null) \n                \n              })\n              .catch(() => this.props.setPopout(null))\n            })\n            .catch(() => this.props.setPopout(null))\n          })\n          .catch(() => this.props.setPopout(null))\n        }\n      })\n      .catch(() => this.props.setPopout(null))\n    }\n\n    edit = (item, n) => {\n      let name = item.description;\n      let screenName = item.code;\n      const { state } = this.props\n      this.props.setPopout(<ScreenSpinner />)\n      bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n        app_id: state.appId,\n        scope: \"wall,groups\",\n        request_id: 1\n      })\n      .then(auth => {\n        if(auth.access_token && auth.scope === \"wall,groups\"){\n          bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n            method: \"groups.getById\",\n            request_id: 2,\n            params: {\n              group_id: screenName,\n              access_token: auth.access_token,\n              v: 5.107,\n            }\n          })\n          .then(data => {\n            bridge.sendPromise(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": data.response[0].id, \"key\": \"dBuBKe1kFcdemzB\"})\n            .then(() => {\n              bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n                method: \"wall.get\",\n                request_id: 2,\n                params: {\n                  domain: screenName,\n                  access_token: auth.access_token,\n                  v: 5.107,\n                }\n              })\n              .then(tags => {\n                fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-tags\", {\n                  \"headers\": {\n                    \"accept\": \"*/*\",\n                    \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n                    \"content-type\": \"application/json;charset=utf-8\",\n                  },\n                  \"body\": JSON.stringify({\n                    user_id: String(this.props.state.user.id)\n                  }),\n                  \"method\": \"POST\",\n                })\n                .then(response => response.json())\n                .then(arr => {\n                  let tagsIn = [];\n                  let tagsOut = [];\n                  let itemsWall = tags.response.items;\n                  let tags_obj = arr.tags.filter(element => { if(element.body.split('@')[1] ===  screenName) { return true; }});\n                  let tags_name = arr.tags.map(e => { return e.body});\n                  console.log(tags_name);\n                  itemsWall.forEach((group) => {\n                    let match = [...group.text.matchAll(/(#.*@.*)/g)];\n                    if (match.length) {\n                      if (match.length > 2) {\n                        let matchOut = match[2];\n                        tagsOut.push(matchOut)\n                    }\n                    let matchIn = match[0];\n                    tagsIn.push(matchIn)\n                    }\n                  });\n                  tagsIn = tagsIn.map((item) => \n                    item[0]\n                  )\n                  tagsIn = tagsIn.filter((v,i) => tagsIn.indexOf(v) === i)\n                  tagsOut = tagsOut.map((item) => \n                    item[0]\n                  )\n                  tagsOut = tagsOut.filter((v,i) => tagsOut.indexOf(v) === i)\n                  let obj = {\n                    name:name,\n                    \n                    groupId:data.response[0].id, \n                    from:tagsOut.map((item) => {\n                      return {\n                        tag: item,\n                        checked: tags_name.indexOf(item) !== -1\n                      }\n                    }),\n                    to:tagsIn.map((item) => {\n                      return {\n                        tag: item,\n                        checked: tags_name.indexOf(item) !== -1\n                      }\n                    })\n                  }\n  \n                  this.props.onChangeGroups('obj', obj);\n                  this.props.openModal('subscribeCities');\n                  this.props.setPopout(null);\n                }).catch(err => {\n                  this.props.setPopout(null)\n                  console.log(err)\n                  this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})}/>, data:'error'})\n                })\n              })\n              .catch((err) => {this.props.setPopout(null); console.log('1')})\n            })\n            .catch((err) => {this.props.setPopout(null); console.log('2')})\n          })\n          .catch((err) => {this.props.setPopout(null); console.log('3')})\n        }\n      })\n      .catch(() => {this.props.setPopout(null); console.log('4')})\n    }\n  \n  \n    // Предупреждение с информацией\n    openAlert = (item, e) => {\n      if(e.currentTarget.checked) {\n        this.subscribeMessages(item.code, item.description);\n      }else {\n        this.props.setPopout(<ScreenSpinner />)\n        bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n          app_id: this.props.state.appId,\n          scope:\"\",\n          request_id: 1\n        })\n        .then((auth) => {\n            bridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"groups.getById\", \"params\": {\"group_id\": item.code,\"fields\":\"description\", \"v\": \"5.120\", \"access_token\":auth.access_token}})\n            .then((data) => {\n              console.log(data);\n              this.props.setPopout(\n                <Alert\n                  actions={[{\n                    title: 'Отмена',\n                    autoclose: true,\n                    mode: 'cancel'\n                  }, {\n                    title: 'Удалить',\n                    autoclose: true,\n                    mode:'destructive',\n                    action: () => this.delete(item.code),\n                  }]}\n                  onClose={() => this.props.setPopout(null)}\n                >\n                  <Text>Удалить все подписки в личные сообщения из сообщества <b>\"{data.response[0].name}\"</b>?</Text>\n                </Alert>\n              )\n            });\n     });\n    }\n  }\n  \n    delete = (code) => {\n      this.props.setPopout(<ScreenSpinner />);\n      fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-tags\", {\n        \"headers\": {\n          \"accept\": \"*/*\",\n          \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n          \"content-type\": \"application/json;charset=utf-8\",\n        },\n        \"body\": JSON.stringify({\n          user_id: String(this.props.state.user.id)\n        }),\n        \"method\": \"POST\",\n      })\n      .then(response => response.json())\n      .then(data => {\n        let arrCategory = [];\n        let arr = [];\n        data.tags.forEach(tag => {\n          if(tag.body.split('@')[1] == code) {\n            fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/remove-tag\", {\n              \"headers\": {\n                \"accept\": \"*/*\",\n                \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n                \"content-type\": \"application/json;charset=utf-8\",\n              },\n              \"referrer\": \"https://appvk.flights.ru/\",\n              \"referrerPolicy\": \"no-referrer-when-downgrade\",\n              \"body\": JSON.stringify({tag_id:tag.id, user_id:this.props.state.user.id}),\n              \"method\": \"POST\",\n            })\n            .then(response => response.json())\n            .then(check => {\n              if(check.response === 'ok'){\n              }\n            })\n          }\n        }  \n        );\n        this.props.state.my_groups.splice(this.props.state.my_groups.indexOf(code), 1);\n        console.log(this.props.state.my_groups.indexOf(code), arr)\n        this.props.setPopout(null);\n      }).catch(err => {\n        this.props.setPopout(null)\n        this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})}/>, data:'error'})\n      })\n    }\n\n  render() {\n    const {\n      id,\n      state,\n      go,\n    } = this.props\n    return (\n      <Panel id={id}>\n        <PanelHeader\n          left={\n            <PanelHeaderBack onClick={() => go(\"catalog\")} />\n          }\n        >{state.catalog[state.currentCatalog].catalog}</PanelHeader>\n      \n        {\n          (state.currentSection || state.currentSection === 0) && (\n            <Header>{state.catalog[state.currentCatalog].to[state.currentSection].section}</Header>\n          )\n        }\n        {\n          (state.currentSection || state.currentSection === 0) && (\n            state.catalog && (\n              state.catalog[state.currentCatalog].to[state.currentSection].arr.map((item, index) => \n              <RichCell\n                key={index}\n                multiline\n                actions={<span style={{ fontSize:12, color:'var(--dynamic_gray)'}}>{this.state.subscribeGroup[item.code] && \"добавлено в новостную ленту\"}<br /> {state.my_groups.indexOf(item.code) !== -1 && \"добавлено в личные сообщения\"}</span>}\n                bottom={\n                  <div style={{ marginTop: 8 }}>\n                    <Link href={\"https://vk.com/\"+item.code} target=\"_blank\"><Icon28ViewOutline fill=\"#4BBDE7\"/></Link>\n                    <Link style={{ marginLeft:10 }}>{<Icon28UserAddOutline fill={!this.state.subscribeGroup[item.code] ? \"#4BBDE7\": '#0E62F1'} onClick={() => {if(!this.state.subscribeGroup[item.code]) this.subscribe(item.code)}} />}</Link>\n                    <Link style={{ marginLeft:10 }}>{<Icon28SettingsOutline fill={state.my_groups.indexOf(item.code) === -1 ? '#4BBDE7' : '#0E62F1'} onClick={() => {if(state.my_groups.indexOf(item.code) === -1) this.subscribeMessages(item.code, item.description); else this.edit(item)}} />}</Link>\n                    <Link style={{ marginLeft:10 }}><Icon28HelpOutline fill=\"#4BBDE7\" onClick={() => this.props.goGroup({...item, source:'catalog'})}/></Link>\n                  </div>\n                }\n                \n                after={<Switch onChange={(e) => this.openAlert(item, e)} checked={state.my_groups.indexOf(item.code) !== -1 }/>}\n              >\n                {item.description}\n              </RichCell>\n              )\n            )\n          )\n        }\n \n      </Panel>\n    )\n  }\n}\n\nexport default SectionCatalog\n","import React, { Component } from 'react'\nimport bridge from '@vkontakte/vk-bridge'\nimport { Group, ScreenSpinner, List, Text, Link, Header, Placeholder, ActionSheet, ActionSheetItem, Alert, SimpleCell, PullToRefresh, Checkbox, Div, Separator, Snackbar } from '@vkontakte/vkui'\nimport Icon28EditOutline from '@vkontakte/icons/dist/28/edit_outline';\nimport Icon28DeleteOutlineAndroid from '@vkontakte/icons/dist/28/delete_outline_android';\nimport Icon24Settings from '@vkontakte/icons/dist/24/settings';\nimport Icon28SettingsOutline from '@vkontakte/icons/dist/28/settings_outline';\n\nimport SnackbarError from './SnackbarError';\n\nexport class MyGroups extends Component {\n  state = {\n    data: this.props.groups,\n    snackbar:null,\n    isFetching:false,\n    deleted:[]\n  }\n\n  onChangeDelete = (e) => {\n    const { name , checked, id } = e.currentTarget;\n    if(checked) \n      this.state.deleted.push({group:id, to:name});\n    else {\n      let i = this.state.deleted.findIndex(i => i.to === name);\n      this.state.deleted.splice(i, 1);\n    }\n    console.log(this.state.deleted)\n  }\n\n  openConfirm = (name, screenName, n, i) => { \n\n    this.props.setPopout(<ScreenSpinner />)\n      bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n        app_id: this.props.state.appId,\n        scope:\"\",\n        request_id: 1\n      })\n      .then((auth) => {\n          bridge.send(\"VKWebAppCallAPIMethod\", {\"method\": \"groups.getById\", \"params\": {\"group_id\": screenName,\"fields\":\"description\", \"v\": \"5.120\", \"access_token\":auth.access_token}})\n          .then((data) => {\n            this.props.setPopout(\n              <Alert\n                actions={[{\n                  title: 'Отмена',\n                  autoclose: true,\n                  mode: 'cancel'\n                }, {\n                  title: 'Удалить',\n                  autoclose: true,\n                  mode:'destructive',\n                  action: () => this.deleteAll(screenName, n, i),\n                }]}\n                onClose={() => this.props.setPopout(null)}\n              >\n                <Text>Удалить все подписки в личные сообщения из сообщества <b>\"{data.response[0].name}\"</b>?</Text>\n              </Alert>\n            )\n          });\n   });\n  }\n\n  deleteAll = (code, n, i, group) => {\n    this.props.setPopout(<ScreenSpinner />);\n      this.state.data[n].data[i].data.forEach(tag => {\n        if(tag.body.split('@')[1] == code) {\n          fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/remove-tag\", {\n            \"headers\": {\n              \"accept\": \"*/*\",\n              \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n              \"content-type\": \"application/json;charset=utf-8\",\n            },\n            \"referrer\": \"https://appvk.flights.ru/\",\n            \"referrerPolicy\": \"no-referrer-when-downgrade\",\n            \"body\": JSON.stringify({tag_id:tag.id, user_id:this.props.state.user.id}),\n            \"method\": \"POST\",\n          })\n          .then(response => response.json())\n          .then(check => {\n            if(check.response === 'ok'){\n            }\n          })\n        }\n      }  \n      )\n        this.props.state.my_groups.splice(this.props.state.my_groups.indexOf(code), 1);\n        this.props.onChangeCount('countGroups', this.props.state.my_groups.length);\n        this.state.data[n].data.splice(i, 1);\n        this.props.setPopout(null);\n\n  }\n\n  delete = (id, n, i, t) => {\n    console.log(i)\n    this.props.setPopout(<ScreenSpinner />);\n    fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/remove-tag\", {\n      \"headers\": {\n        \"accept\": \"*/*\",\n        \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n        \"content-type\": \"application/json;charset=utf-8\",\n      },\n      \"referrer\": \"https://appvk.flights.ru/\",\n      \"referrerPolicy\": \"no-referrer-when-downgrade\",\n      \"body\": JSON.stringify({tag_id:id, user_id:this.props.state.user.id}),\n      \"method\": \"POST\",\n    })\n    .then(response => response.json())\n    .then(check => {\n      if(check.response === 'ok'){\n        this.state.data[n].data[i].data.splice(t, 1);\n        if(this.state.data[n].data[i].data.length === 0) {\n          this.state.data[n].data.splice(i, 1)\n        }\n        this.props.setPopout(null);\n        this.setState({ snackbar: <Snackbar action=\"Отмена\" onClose={() => this.setState({ snackbar: null})}><Text>Подписка удалена.</Text></Snackbar>})\n      }\n    })\n  }\n\n\n  edit_ = (name, screenName, n, i) => {\n    console.log(screenName)\n    const { state } = this.props\n    this.props.setPopout(<ScreenSpinner />)\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n      app_id: state.appId,\n      scope: \"wall,groups\",\n      request_id: 1\n    })\n    .then(auth => {\n      if(auth.access_token && auth.scope === \"wall,groups\"){\n        bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n          method: \"groups.getById\",\n          request_id: 2,\n          params: {\n            group_id: screenName,\n            access_token: auth.access_token,\n            v: 5.107,\n          }\n        })\n        .then(data => {\n          bridge.sendPromise(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": data.response[0].id, \"key\": \"dBuBKe1kFcdemzB\"})\n          .then(() => {\n            bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n              method: \"wall.get\",\n              request_id: 3,\n              params: {\n                domain: screenName,\n                access_token: auth.access_token,\n                v: 5.107,\n              }\n            })\n            .then(async tags => {\n              let tagsIn = [];\n              let tagsOut = [];\n              let itemsWall = tags.response.items;\n              let tags_obj = this.state.data[n].data[i].data.filter(element => { if(element.body.split('@')[1] ===  screenName) { return true; }});\n              let tags_name = tags_obj.map(e => { return e.body});\n              console.log(tags_name);\n              itemsWall.forEach((group) => {\n                let match = [...group.text.matchAll(/(#.*@.*)/g)];\n                if (match.length) {\n                  if (match.length > 2) {\n                    let matchOut = match[2];\n                    tagsOut.push(matchOut)\n                }\n                let matchIn = match[0];\n                tagsIn.push(matchIn)\n                }\n              });\n              tagsIn = tagsIn.map((item) => \n                item[0]\n              )\n              tagsIn = tagsIn.filter((v,i) => tagsIn.indexOf(v) === i)\n              tagsOut = tagsOut.map((item) => \n                item[0]\n              )\n              tagsOut = tagsOut.filter((v,i) => tagsOut.indexOf(v) === i)\n              let obj = {\n                name:name,\n                groupId:data.response[0].id, \n                from:tagsOut.map((item) => {\n                  return {\n                    tag: item,\n                    checked: tags_name.indexOf(item) !== -1\n                  }\n                }),\n                to:tagsIn.map((item) => {\n                  return {\n                    tag: item,\n                    checked: tags_name.indexOf(item) !== -1\n                  }\n                })\n              }\n              this.props.onChangeGroups('obj', obj);\n              this.props.openModal('subscribeCities');\n              this.props.setPopout(null);\n\n            })\n            .catch((err) => {this.props.setPopout(null); console.log(err)})\n          })\n          .catch((err) => {this.props.setPopout(null); console.log(err)})\n        })\n        .catch((err) => {this.props.setPopout(null); console.log(err)})\n      }\n    })\n    .catch(() => this.props.setPopout(null))\n  }\n\n  onRefresh = () => {\n    this.setState({ isFetching:true })\n    fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-tags\", {\n      \"headers\": {\n        \"accept\": \"*/*\",\n        \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n        \"content-type\": \"application/json;charset=utf-8\",\n      },\n      \"body\": JSON.stringify({\n        user_id: String(this.props.state.user.id)\n      }),\n      \"method\": \"POST\",\n    })\n    .then(response => response.json())\n    .then(data => {\n      let arrGroups = [];\n      data.tags.forEach(tag => {if(arrGroups.indexOf(tag.body.split('@')[1]) === -1) arrGroups.push(tag.body.split('@')[1])});\n      this.props.onChangeGroups('my_groups', arrGroups);\n      let arrCategory = [];\n      let arr = [];\n      data.tags.forEach(tag => {if(arrCategory.indexOf(tag.category) === -1) arrCategory.push(tag.category)});\n      arrCategory.forEach(category => {\n        let groupsCategory = [];\n        data.tags.forEach(tag => {if(groupsCategory.indexOf(tag.group_name) === -1 && tag.category === category) groupsCategory.push(tag.group_name)});\n        let arrG = [];\n        groupsCategory.forEach(group => {\n          let u = [];\n          u = data.tags.filter(tag => tag.category === category && tag.group_name == group);\n          let code = data.tags.filter(tag => tag.category === category && tag.group_name == group)[0].body.split('@')[1];\n          arrG.push({group, code, data:u});\n        })\n        arr.push({category, data: arrG})   \n      })\n      this.setState({ data: arr, isFetching:false})\n    })\n  }\n\n  render() {\n    const {\n      data\n    } = this.state\n    return (\n      <div>\n      <PullToRefresh isFetching={this.state.isFetching} onRefresh={this.onRefresh}>\n      <Group>\n        {this.state.data === 'error' ? <Placeholder>Ошибка интернет-соединения</Placeholder>:\n        data && \n        <div>\n          {data.length === 0 ? <Placeholder style={{paddingTop:10}}>\n                                  Привет, {this.props.state.user.first_name}!<br />\n                                  Добро пожаловать в гипермаркет «Дешевые авиабилеты» <br />\n                                  Мы показываем авиабилеты в момент снижения цены на 30% или больше.\n                                  Не веришь? Посмотри раздел «Витрина» торгового зала - это 700 сообществ. \n                                  Выбери один или сразу все способы получения информации - в новостную ленту и в личные сообщения. <br />\n                                  Найди свой город вылета!\n                                </Placeholder>:\n        <List>\n          {\n              data.map((item, n) => \n                <div key={n}>\n                  {item.data.map((data, i) =>\n                    <Group key={item.category} header={<Header>{item.category + \" -  \" + data.group}</Header>}>\n                      <SimpleCell><Link style={{ display: 'flex'}}><Icon28SettingsOutline onClick={() => this.edit_(data.group, data.code, n, i)} fill='#4BBDE7'/><Icon28DeleteOutlineAndroid style={{ marginLeft:12 }} fill='#4BBDE7' onClick={() => this.openConfirm(data.group, data.code, n, i)}/></Link></SimpleCell>\n                      \n                        {data.data.map((res, t) => \n                          <SimpleCell key={res.id} after={<Link onClick={() => this.delete(res.id, n, i, t)}><Icon28DeleteOutlineAndroid fill='#4BBDE7'/></Link>}>{res.body.split('@')[0].split('#')[1]}</SimpleCell>\n                        )}                   \n                    </Group>          \n                  )}\n               </div>  \n              )    \n          }\n        </List>\n        }\n        <Div />\n        <Div />\n        </div>\n      }\n      {this.state.snackbar}\n      </Group>\n      </PullToRefresh>\n      </div>\n    )\n  }\n}\n\nexport default MyGroups\n","import React, { Component } from 'react'\nimport SnackbarError from './SnackbarError';\nimport { Group, ScreenSpinner, CardGrid, Card, Div, Button, Alert, Placeholder, List, Header, PullToRefresh, Link, Title, SimpleCell, Text } from '@vkontakte/vkui'\n\nimport Icon28SettingsOutline from '@vkontakte/icons/dist/28/settings_outline';\nimport Icon28DeleteOutlineAndroid from '@vkontakte/icons/dist/28/delete_outline_android';\n\nconst SEASONS_TRANSCRIPTION = {\n  'all': 'любое',\n  'winter': 'зима',\n  'spring': 'весна',\n  'summer': 'лето',\n  'fall': 'осень',\n};\nconst MONTHS_TRANSCRIPTION = {\n  0: 'любой',\n  1: 'январь', 2: 'февраль', 3: 'март', 4: 'апрель',\n  5: 'май', 6: 'июнь', 7: 'июль', 8: 'август',\n  9: 'сентябрь', 10: 'октябрь', 11: 'ноябрь', 12: 'декабрь',\n};\n\nconst CONTINENTS = {\n  'random': 'любая',\n  'E': 'Европа',\n  'F': 'Африка',\n  'O': 'Океания',\n  'A': 'Азия',\n  'S': 'Южная Америка',\n  'N': 'Северная Америка',\n};\n\nconst PASSENGERS = {\n  url: \"1 пассажир, экономкласс\",\n  url1Business: \"1 пассажир, бизнес-класс\",\n  url2Passengers: \"2 пассажира, экономкласс\",\n  urlForma: \"открытая редактируемая форма поиска\"\n}\n\nconst CURRENCY = {\n  AZN: \"манат\",\n  BYN: \"беларусский рубль\",\n  CNY: \"юань\",\n  EUR: \"евро\",\n  KGS: \"сом\",\n  KZT: \"тенге \",\n  RUB: \"рубль \",\n  THB: \"бат\",\n  UAH: \"гривна\",\n  USD: \"доллар\",\n  UZS: \"сум\"\n}\n\nconst CURRENCY1 = {\n  AZN: \"манат\",\n  BYN: \"беларусских рублей\",\n  CNY: \"юань\",\n  EUR: \"евро\",\n  KGS: \"сом\",\n  KZT: \"тенге \",\n  RUB: \"рублей\",\n  THB: \"бат\",\n  UAH: \"гривна\",\n  USD: \"доллар\",\n  UZS: \"сум\"\n}\n\nconst LANGUAGES = {\n  de: \"немецкий\",\n  en: \"английский\",\n  es: \"испанский\",\n  fr: \"французский\",\n  it: \"итальянский\",\n  ru: \"русский\",\n  th: \"тайский\",\n  tr: \"турецкий\"\n}\n\nconst blue = {\n  color:'var(--accent)'\n}\n\nexport class MyDB extends Component {\n  state = {\n    snackbar:null,\n    data:this.props.DB,\n    isFetching:false\n  }\n\n\n  openAlert = (request_id, i) => {\n    console.log(request_id)\n      this.props.setPopout(\n        <Alert\n        actions={[{\n          title: 'Нет',\n          autoclose: true,\n          mode: 'cancel'\n        }, {\n          title: 'Да',\n          autoclose: true,\n          mode: 'destructive',\n          action: () => this.delete(request_id, i),\n        }]}\n        onClose={() => this.props.setPopout(null)}>\n          <Text>Удалить?</Text>\n        </Alert>\n      )\n  }\n\n  delete = (request_id, i) => {\n    this.props.setPopout(<ScreenSpinner />);\n    fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/delete-request\", {\n      \"headers\": {\n        \"accept\": \"*/*\",\n        \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n        \"content-type\": \"application/json;charset=utf-8\",\n      },\n      \"referrer\": \"https://appvk.flights.ru/\",\n      \"referrerPolicy\": \"no-referrer-when-downgrade\",\n      \"body\": JSON.stringify({request_id:request_id}),\n      \"method\": \"POST\",\n    })\n    .then(response => response.json())\n    .then(check => {\n      if(check.response === 'ok'){\n        let remove = this.state.data.splice(i, 1);\n        this.props.onChangeCount('countDB', remove.length-1);\n        this.props.setPopout(null);\n      }\n    })\n  }\n\n  edit = (obj) => {\n    let data = JSON.parse(obj.output);\n    this.props.onChangeGroups('form', {...data, id:obj.id});\n    setTimeout(() => this.props.go('edit_settings'), 500)\n  }\n\n  onRefresh = () => {\n    this.setState({ isFetching:true })\n    fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-requests\", {\n      \"headers\": {\n        \"accept\": \"*/*\",\n        \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n        \"content-type\": \"application/json;charset=utf-8\",\n      },\n      \"body\": JSON.stringify({\n        user_id: String(this.props.state.user.id)\n      }),\n      \"method\": \"POST\",\n    })\n    .then(response => response.json())\n    .then(data => {\n      console.log(data);\n      this.setState({ data: data.requests, isFetching:false })\n      this.props.setPopout(null)\n    }).catch(err => {\n      this.props.setPopout(null)\n      this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})}/>, data:'error'})\n    })\n  }\n  \n\n  render() {\n    const {\n      data\n    } = this.state\n    return (\n      <PullToRefresh isFetching={this.state.isFetching} onRefresh={this.onRefresh}>\n      <div>\n        {\n          data &&        \n          <div>\n          {data === 'error' ? <Placeholder>Ошибка интернет-соединения</Placeholder> :\n          <div>\n            {data.length === 0 ? <Placeholder>У вас нет подписок.</Placeholder>:\n          (\n            <List>\n             {data.map((item, index) =>\n              <div>\n                <Header style={{ marginTop:12}}>{CONTINENTS[JSON.parse(item.output).continentDst] != null ? (CONTINENTS[JSON.parse(item.output).continentDst] + (JSON.parse(item.output).countryDst && \" - \" + JSON.parse(item.output).countryDst + (JSON.parse(item.output).cityDst != null ? (\" - \" + JSON.parse(item.output).cityDst): ''))):'Любое'}</Header>\n              <SimpleCell><Link style={{ display: 'flex'}}><Icon28SettingsOutline onClick={() => this.edit(item)} fill='#4BBDE7'/><Icon28DeleteOutlineAndroid style={{ marginLeft:12 }} fill='#4BBDE7' onClick={() => this.openAlert(item.id, index)} /></Link></SimpleCell>\n              <Div style={{ paddingTop: 0 }}>\n                <Title weight='regular' level='3'>\n        Из страны <b style={blue}>{\n          JSON.parse(item.output).countrySrc ? JSON.parse(item.output).countrySrc : \"любая\"\n        }</b> и города <b style={blue}>{JSON.parse(item.output).citySrc ? JSON.parse(item.output).citySrc : \"любой\"}</b><br />\n\n        {\n          JSON.parse(item.output).dates.map((item, i) => \n            <div key={i}>\n              <div style={{ color: 'var(--tabbar_inactive_icon)' }}>Период вылета({i+1})</div>\n              год <b style={blue}>{item.year}</b><br />\n              время года <b style={blue}>{SEASONS_TRANSCRIPTION[item.season]}</b><br />\n              месяц <b style={blue}>{MONTHS_TRANSCRIPTION[item.month]}</b><br />\n              \n            </div>    \n          )\n        }<br />\n                Направление полетов: туда-обратно - <b style={blue}>{JSON.parse(item.output).dual ? \"да\" : \"нет\"}</b><br />\n        Направление полетов: туда - <b style={blue}>{JSON.parse(item.output).forward ? \"да\" : \"нет\"}</b><br />\n        Пассажиры <b style={blue}>{PASSENGERS[JSON.parse(item.output).passengers]}</b><br />\n        Цена от <b style={blue}>{JSON.parse(item.output).costMin}</b> до <b style={blue}>{JSON.parse(item.output).costMax}</b> {CURRENCY1[JSON.parse(item.output).currency]}<br />\n\n        Период показа <b style={blue}>{JSON.parse(item.output).interval}</b> минут<br />\n        Глубина поиска <b style={blue}>{JSON.parse(item.output).updated}</b> минут<br />\n        Максимальное количество билетов за 24 часа <b style={blue}>{JSON.parse(item.output).limit === \"0\" ? \"все\" : JSON.parse(item.output).limit}</b><br />\n        Язык (туда-обратно) <b style={blue}>{LANGUAGES[JSON.parse(item.output).language]}</b><br />\n        Валюта (цена) <b style={blue}>{CURRENCY[JSON.parse(item.output).currency]}</b><br />\n        Валюта (метапоисковика) <b style={blue}>{CURRENCY[JSON.parse(item.output).currencyForUrl]}</b><br />\n        {\n          JSON.parse(item.output).optional && (\n            <div><br />\n              <div style={{ color: 'var(--tabbar_inactive_icon)' }}>Дополнительные параметры</div>\n              {\n                JSON.parse(item.output).profitability && (\"Выгодность покупки больше \")\n              }\n              {\n                JSON.parse(item.output).profitability && \n                <b style={blue}>{JSON.parse(item.output).profitability+\"%\"}</b>\n              }<br />\n              Дни недели вылета <b style={blue}>{\n                ((days) => {\n                  const daysOfWeek = [\n                    \"вс\",\n                    \"пн\",\n                    \"вт\",\n                    \"ср\",\n                    \"чт\",\n                    \"пт\",\n                    \"сб\"\n                  ]\n                  let check = 0;\n                  days.every((element, index, array) => {\n                      check++;\n                      return element === true;\n                  });\n                  if (check === 7) {\n                      return 'все';\n                  }\n                  let res = '';\n                  for (let index = 1; index < days.length; index++) {\n                      if (days[index]) {\n                          res += daysOfWeek[index].toLowerCase() + ', ';\n                      }\n                  }\n                  res += daysOfWeek[0].toLowerCase();\n                  return res;\n                })(JSON.parse(item.output).days)\n              }</b><br />\n              {\n                JSON.parse(item.output).showAddionalWeather && (\n                  <div>\n                    Прогноз погоды в день прилета<br />\n                    Днем от <b style={blue}>{JSON.parse(item.output)['dayTemp.min']}</b> С до <b style={blue}>{JSON.parse(item.output)['dayTemp.max']}</b> С<br />\n                    Ночью от <b style={blue}>{JSON.parse(item.output)['nightTemp.min']}</b> С до <b style={blue}>{JSON.parse(item.output)['nightTemp.max']}</b> С<br />\n                  </div>\n                )\n              }\n            </div>\n          )\n        }\n              </Title>\n                </Div>\n              </div>\n             )\n             } \n            </List>\n              \n          )\n            }\n          </div>\n         }\n         </div> \n        }\n        {this.state.snackbar}\n        <Div />\n        <Div />\n      </div>\n      </PullToRefresh>\n    )\n  }\n}\n\nexport default MyDB\n\n{ /*    \n\n  <CardGrid>\n    <Card size=\"l\" mode=\"shadow\">\n      <Div style={{ padding: '20px', lineHeight: 1.5 }}>\n        Из страны <b style={blue}>{\n          JSON.parse(item.output).countrySrc ? JSON.parse(item.output).countrySrc : \"любая\"\n        }</b> и города <b style={blue}>{JSON.parse(item.output).citySrc ? JSON.parse(item.output).citySrc : \"любой\"}</b><br />\n        В часть света <b style={blue}>{CONTINENTS[JSON.parse(item.output).continentDst]}</b> и страну <b style={blue}>{JSON.parse(item.output).countryDst ? JSON.parse(item.output).countryDst : \"любая\"}</b><br />\n        В город <b style={blue}>{JSON.parse(item.output).cityDst ? JSON.parse(item.output).cityDst : \"любой\"}</b><br />\n        Направление полетов: туда-обратно - <b style={blue}>{JSON.parse(item.output).dual ? \"да\" : \"нет\"}</b><br />\n        Направление полетов: туда - <b style={blue}>{JSON.parse(item.output).forward ? \"да\" : \"нет\"}</b><br />\n        {\n          JSON.parse(item.output).dates.map((item, i) => \n            <div key={i}>\n              Год вылета ({i+1}) <b style={blue}>{item.year}</b><br />\n              Время года ({i+1}) <b style={blue}>{SEASONS_TRANSCRIPTION[item.season]}</b><br />\n              Месяц ({i+1}) <b style={blue}>{MONTHS_TRANSCRIPTION[item.month]}</b><br />\n            </div>    \n          )\n        }<br />\n        Пассажиры <b style={blue}>{PASSENGERS[JSON.parse(item.output).passengers]}</b><br />\n        Цена от <b style={blue}>{JSON.parse(item.output).costMin}</b> до <b style={blue}>{JSON.parse(item.output).costMax}</b> {CURRENCY1[JSON.parse(item.output).currency]}<br />\n\n        Период показа <b style={blue}>{JSON.parse(item.output).interval}</b> минут<br />\n        Глубина поиска <b style={blue}>{JSON.parse(item.output).updated}</b> минут<br />\n        Максимальное количество билетов за 24 часа <b style={blue}>{JSON.parse(item.output).limit === \"0\" ? \"все\" : JSON.parse(item.output).limit}</b><br />\n        Язык (туда-обратно) <b style={blue}>{LANGUAGES[JSON.parse(item.output).language]}</b><br />\n        Валюта (цена) <b style={blue}>{CURRENCY[JSON.parse(item.output).currency]}</b><br />\n        Валюта (метапоисковика) <b style={blue}>{CURRENCY[JSON.parse(item.output).currencyForUrl]}</b><br />\n        {\n          JSON.parse(item.output).optional && (\n            <div><br />\n              <div style={{ color: 'var(--tabbar_inactive_icon)' }}>Дополнительные параметры</div>\n              {\n                JSON.parse(item.output).profitability && (\"Выгодность покупки больше \")\n              }\n              {\n                JSON.parse(item.output).profitability && \n                <b style={blue}>{JSON.parse(item.output).profitability+\"%\"}</b>\n              }<br />\n              Дни недели вылета <b style={blue}>{\n                ((days) => {\n                  const daysOfWeek = [\n                    \"вс\",\n                    \"пн\",\n                    \"вт\",\n                    \"ср\",\n                    \"чт\",\n                    \"пт\",\n                    \"сб\"\n                  ]\n                  let check = 0;\n                  days.every((element, index, array) => {\n                      check++;\n                      return element === true;\n                  });\n                  if (check === 7) {\n                      return 'все';\n                  }\n                  let res = '';\n                  for (let index = 1; index < days.length; index++) {\n                      if (days[index]) {\n                          res += daysOfWeek[index].toLowerCase() + ', ';\n                      }\n                  }\n                  res += daysOfWeek[0].toLowerCase();\n                  return res;\n                })(JSON.parse(item.output).days)\n              }</b><br />\n              {\n                JSON.parse(item.output).showAddionalWeather && (\n                  <div>\n                    Прогноз погоды в день прилета<br />\n                    Днем от <b style={blue}>{JSON.parse(item.output)['dayTemp.min']}</b> С до <b style={blue}>{JSON.parse(item.output)['dayTemp.max']}</b> С<br />\n                    Ночью от <b style={blue}>{JSON.parse(item.output)['nightTemp.min']}</b> С до <b style={blue}>{JSON.parse(item.output)['nightTemp.max']}</b> С<br />\n                  </div>\n                )\n              }\n            </div>\n          )\n        }\n      </Div>\n      <Div>\n        <Button\n          onClick={() => this.edit(item)}\n          size=\"xl\"\n        >\n          Редактировать\n        </Button><br />\n        <Button\n          onClick={() => this.openAlert(item.id, index)}\n          size=\"xl\"\n          mode=\"destructive\"\n        >\n          Удалить\n        </Button>\n      </Div>\n    </Card>\n  </CardGrid>\n</Group>\n*/}\n","import React, { Component } from 'react'\r\nimport { Panel, Avatar, Div, Progress, Spinner, FixedLayout, InfoRow } from '@vkontakte/vkui';\r\n\r\nconst Load =  ({ progress}) => (\r\n    \r\n     <Div>\r\n         <Div align='center'>\r\n             <Avatar size={96} src='https://sun1-95.userapi.com/pigYo8TH8e7MkcdiKecnb8J9xygOvSjefZavPA/UzmrJFHdYVs.jpg'/>\r\n         </Div>\r\n         \r\n                <FixedLayout vertical='bottom'>\r\n                    <Spinner style={{ marginBottom: 12 }}/>\r\n                    <InfoRow header=\"Добро пожаловать на борт\"><Progress value={progress} /></InfoRow>\r\n                    \r\n                </FixedLayout>\r\n             \r\n         \r\n     </Div>\r\n\r\n)\r\n\r\nexport default Load;","import React, { Component } from 'react'\nimport { Panel, PanelHeader, FixedLayout, Tabs, TabsItem, Div, Button, Counter, ActionSheet, ActionSheetItem, MiniInfoCell } from '@vkontakte/vkui'\nimport MyGroups from '../components/MyGroups'\nimport MyDB from '../components/MyDB';\nimport Load from '../components/Load';\nimport SnackbarError from '../components/SnackbarError';\n\nimport Icon28AddOutline from '@vkontakte/icons/dist/28/add_outline';\nimport Icon28Send from '@vkontakte/icons/dist/28/send';\nimport Icon20FollowersOutline from '@vkontakte/icons/dist/20/followers_outline';\nimport Icon20MessageOutline from '@vkontakte/icons/dist/20/message_outline';\n\nconst SEASONS_TRANSCRIPTION = {\n  'all': 'любое',\n  'winter': 'зима',\n  'spring': 'весна',\n  'summer': 'лето',\n  'fall': 'осень',\n};\nconst MONTHS_TRANSCRIPTION = {\n  0: 'любой',\n  1: 'январь', 2: 'февраль', 3: 'март', 4: 'апрель',\n  5: 'май', 6: 'июнь', 7: 'июль', 8: 'август',\n  9: 'сентябрь', 10: 'октябрь', 11: 'ноябрь', 12: 'декабрь',\n};\n\nconst CONTINENTS = {\n  'random': 'любая',\n  'E': 'Европа',\n  'F': 'Африка',\n  'O': 'Океания',\n  'A': 'Азия',\n  'S': 'Южная Америка',\n  'N': 'Северная Америка',\n};\n\nconst PASSENGERS = {\n  url: \"1 пассажир, экономкласс\",\n  url1Business: \"1 пассажир, бизнес-класс\",\n  url2Passengers: \"2 пассажира, экономкласс\",\n  urlForma: \"открытая редактируемая форма поиска\"\n}\n\nconst CURRENCY = {\n  AZN: \"манат\",\n  BYN: \"беларусский рубль\",\n  CNY: \"юань\",\n  EUR: \"евро\",\n  KGS: \"сом\",\n  KZT: \"тенге \",\n  RUB: \"рубль \",\n  THB: \"бат\",\n  UAH: \"гривна\",\n  USD: \"доллар\",\n  UZS: \"сум\"\n}\n\nconst CURRENCY1 = {\n  AZN: \"манат\",\n  BYN: \"беларусских рублей\",\n  CNY: \"юань\",\n  EUR: \"евро\",\n  KGS: \"сом\",\n  KZT: \"тенге \",\n  RUB: \"рублей\",\n  THB: \"бат\",\n  UAH: \"гривна\",\n  USD: \"доллар\",\n  UZS: \"сум\"\n}\n\nconst LANGUAGES = {\n  de: \"немецкий\",\n  en: \"английский\",\n  es: \"испанский\",\n  fr: \"французский\",\n  it: \"итальянский\",\n  ru: \"русский\",\n  th: \"тайский\",\n  tr: \"турецкий\"\n}\n\nconst blue = {\n  color:'var(--accent)'\n}\n\nexport class MySubs extends Component {\n  state = {\n    activeTab: 'groups',\n    progress:0,\n    DB:[],\n    groups:[]\n  }\n\n  componentDidMount() {\n    fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-tags\", {\n      \"headers\": {\n        \"accept\": \"*/*\",\n        \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n        \"content-type\": \"application/json;charset=utf-8\",\n      },\n      \"body\": JSON.stringify({\n        user_id: String(this.props.state.user.id)\n      }),\n      \"method\": \"POST\",\n    })\n    .then(response => response.json())\n    .then(data => {\n      let arrGroups = [];\n      data.tags.forEach(tag => {if(arrGroups.indexOf(tag.body.split('@')[1]) === -1) arrGroups.push(tag.body.split('@')[1])});\n      this.props.onChangeGroups('my_groups', arrGroups);\n      let arrCategory = [];\n      let arr = [];\n      data.tags.forEach(tag => {if(arrCategory.indexOf(tag.category) === -1) arrCategory.push(tag.category)});\n      arrCategory.forEach(category => {\n        let groupsCategory = [];\n        data.tags.forEach(tag => {if(groupsCategory.indexOf(tag.group_name) === -1 && tag.category === category) groupsCategory.push(tag.group_name)});\n        let arrG = [];\n        groupsCategory.forEach(group => {\n          let u = [];\n          u = data.tags.filter(tag => tag.category === category && tag.group_name == group);\n          let code = data.tags.filter(tag => tag.category === category && tag.group_name == group)[0].body.split('@')[1];\n          arrG.push({group, code, data:u});\n        })\n        arr.push({category, data: arrG})   \n      })\n      this.setState({ progress : 50 })\n      fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-requests\", {\n        \"headers\": {\n          \"accept\": \"*/*\",\n          \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n          \"content-type\": \"application/json;charset=utf-8\",\n        },\n        \"body\": JSON.stringify({\n          user_id: String(this.props.state.user.id)\n        }),\n        \"method\": \"POST\",\n      })\n      .then(response => response.json())\n      .then(data => {\n        this.setState({ DB: data.requests, groups: arr, progress:70, countGroups:arrGroups.length,  countDB:data.requests.length});\n        setTimeout(() => this.setState({ progress:99 }), 700);\n        setTimeout(() => this.setState({ progress:100 }), 1200);\n      }).catch(err => {\n        this.props.setPopout(null)\n        this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})}/>, data:'error'})\n      })\n    }).catch(err => {\n      this.props.setPopout(null)\n      this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})}/>, data:'error'})\n    })\n  }\n\n  openMenu = () => {\n    this.props.setPopout(\n      <ActionSheet onClose={() => this.props.setPopout(null)}>\n        <ActionSheetItem autoclose before={<Icon28AddOutline />} onClick={() => this.props.go((this.state.activeTab == 'groups' ? 'groups': 'settings'))}>\n          Добавить подписку\n        </ActionSheetItem>\n        <ActionSheetItem autoclose before={<Icon28Send />} target='_blank' href={\"http://www.aviasales.ru/?marker=\"+ this.props.state.marker}>\n        Купить авиабилет \n        </ActionSheetItem>\n      </ActionSheet>\n    )\n  }\n\n  render() {\n    const {\n      activeTab,\n      progress\n    } = this.state\n    const {\n      id,\n      state\n    } = this.props\n    return (\n      <Panel id={id}>\n        <PanelHeader>Подписки</PanelHeader>\n        {progress == 100 && \n        <FixedLayout vertical=\"top\">\n          <Tabs mode='segmented'>\n            <TabsItem\n              after={this.state.countGroups !== 0 && <Counter>{this.state.countGroups}</Counter>}\n              selected={activeTab === 'groups'}\n              onClick={() => {this.setState({ activeTab: 'groups' });}}\n            >Витрина</TabsItem>\n            <TabsItem\n              after={this.state.countDB !== 0 && <Counter>{this.state.countDB}</Counter>}\n              selected={activeTab === 'database'}\n              onClick={() => {this.setState({ activeTab: 'database' });}}\n            >Мой выбор</TabsItem>\n          </Tabs>\n        </FixedLayout>\n      \n        }\n\n        {progress == 100 &&\n         <div>\n  \n        <FixedLayout vertical='bottom'>\n          <Div align=\"center\" style={{ paddingBottom:6 }}><Button className='circle_button' onClick={this.openMenu}><Icon28AddOutline /></Button></Div>\n        </FixedLayout>\n         </div>\n        }\n        <Div />\n        {progress !== 100 ? <Load progress={progress} /> :\n        <div>\n\n        <div>\n        {\n          activeTab === 'groups' ? \n            <MyGroups\n              setPopout={this.props.setPopout}\n              onChangeGroups={this.props.onChangeGroups}\n              onChangeCount={(name, value) => this.setState({[name]:value})}\n              openModal={this.props.openModal}\n              groups={this.state.groups}\n              state={state}\n            />\n          :\n            <MyDB\n              onChangeGroups={this.props.onChangeGroups}\n              onChangeCount={(name, value) => this.setState({[name]:value})}\n              DB={this.state.DB}\n              setPopout={this.props.setPopout}\n              state={state}\n              onChange={this.props.onChange}\n              go={this.props.go}\n            />\n        }\n        </div>\n          \n        </div>\n        }\n      </Panel>\n    )\n  }\n}\n\nexport default MySubs\n","import React, { Component } from 'react'\nimport { Panel, PanelHeader, Placeholder, Button, SimpleCell, Avatar, ScreenSpinner, RichCell } from '@vkontakte/vkui'\nimport Icon56UsersOutline from '@vkontakte/icons/dist/56/users_outline';\nimport bridge from '@vkontakte/vk-bridge'\nimport { VKMiniAppAPI } from '@vkontakte/vk-mini-apps-api'\nimport SnackbarError from '../components/SnackbarError';\n\nimport Icon28ViewOutline from '@vkontakte/icons/dist/28/view_outline';\n\n\nexport class Friends extends Component {\n  state = {\n    friends: null,\n    snackbar:null\n  }\n\n  componentDidMount() {\n    this.getFriends()\n  }\n  \n  getFriends = () => {\n    this.props.setPopout(<ScreenSpinner />)\n    bridge.sendPromise(\"VKWebAppGetAuthToken\", {\n      app_id: this.props.state.appId,\n      scope: \"friends\"\n    })\n    .then(data => {\n      if(data.access_token){\n        if(data.scope === \"friends\"){\n          bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n            method: \"friends.get\",\n            params: {\n              access_token: data.access_token,\n              fields: \"city,photo_200,country,bdate,status,last_seen\",\n              v: 5.107\n            },\n            request_id: '3'\n          })\n          .then(data => {\n            if(data.response.items){\n              this.setState({\n                friends: data.response.items.filter((item) => item.city).filter((item) => \n                  item.city.id !== this.props.state.user.city.id\n                )\n              })\n              this.props.setPopout(null)\n            }else{\n              this.setState({snackbar:<SnackbarError text={\"У вас нет друзей\"} close={() => this.setState({snackbar:null})}/>})\n              this.props.setPopout(null)\n            }\n          })\n          .catch(() => {\n            this.props.setPopout(null)\n            this.setState({snackbar:<SnackbarError text={\"Не удалось получить друзей\"} close={() => this.setState({snackbar:null})}/>})\n          })\n        }else{\n          this.setState({snackbar:<SnackbarError text={\"Не удалось доступ к друзьям\"} close={() => this.setState({snackbar:null})}/>})\n          this.props.setPopout(null)\n        }\n      }else{\n        this.setState({snackbar:<SnackbarError text={\"Ошибка получения токена\"} close={() => this.setState({snackbar:null})}/>})\n        this.props.setPopout(null)\n      }\n    })\n    .catch(() => {\n      this.props.setPopout(null)\n      this.setState({snackbar:<SnackbarError text={\"Вы не дали доступ к друзьям\"} close={() => this.setState({snackbar:null})}/>})\n    })\n  }\n\n   isEmpty(obj) {\n    for (let key in obj) {\n      return false;\n    }\n    return true;\n  }\n\n  getPrice = (city) => {\n\n  }\n\n  date(date) {\n    if(date == \"\" || date == null) {\n      return \"нет данных\";\n    }\n    let arr = date.split('.');\n    switch (arr[1]) {\n      case '1':\n        return arr[0]+' января';\n      break\n\n      case '2':\n        return arr[0]+' февраля';\n      break\n\n      case '3':\n        return arr[0]+' марта';\n      break\n\n      case '4':\n        return arr[0]+' апреля';\n      break\n      case '5':\n        return arr[0]+' мая';\n      break\n      case '6':\n        return arr[0]+' июня';\n      break\n      case '7':\n        return arr[0]+' июля';\n      break\n      case '8':\n        return arr[0]+' августа';\n      break\n      case '9':\n        return arr[0]+' сентября';\n      break\n\n      case '10':\n        return arr[0]+' октября';\n      break \n        \n      case '11':\n        return arr[0]+' ноября';\n      break\n      case '12':\n        return arr[0]+' декабря';\n      break\n    }\n  }\n\n  open = (friend) => {\n    console.log(friend)\n    this.props.setPopout(<ScreenSpinner />)\n    fetch(\"https://cors-anywhere.herokuapp.com/https://api.travelpayouts.com/data/ru/cities.json\")\n    .then(response => response.json())\n    .then(cities => {\n      let myCode = cities.filter((item) => item.name === this.props.state.user.city.title)[0].code\n      const friendCode = cities.filter((item) => item.name === friend.city.title)[0].code\n      fetch(`https://cors-anywhere.herokuapp.com/https://api.travelpayouts.com/v1/prices/calendar?&origin=${myCode}&destination=${friendCode}&calendar_type=departure_date&token=d378bb3f3b879e6fc87899314ba5ce5d`)\n      .then(response => response.json())\n      .then(data => {\n        console.log(data);\n        let indexPrice = Object.keys(data.data)[0]\n        if(Object.keys(data.data).length > 3){\n          indexPrice = Object.keys(data.data)[3]\n        }\n        console.log(String(indexPrice))\n        if(String(indexPrice) !== 'undefined') {\n        this.props.onChangeGroups('friend',friend); \n        this.props.onChangeGroups('calendar',data.data);\n        this.props.openModal('bullet_to_friend')\n        this.props.setPopout(null)\n        } else {\n          this.setState({snackbar:<SnackbarError text={\"Не нашли цену билета к этому другу :(\"} close={() => this.setState({snackbar:null})}/>})}\n          this.props.setPopout(null)\n      }).catch(err => {\n        this.props.setPopout(null)\n        this.setState({snackbar:<SnackbarError text={\"Не нашли цену билета к этому другу :(\"} close={() => this.setState({snackbar:null})}/>})\n      })\n    }).catch(err => {\n      this.props.setPopout(null)\n      this.setState({snackbar:<SnackbarError text={\"Не нашли город друга :(\"} close={() => this.setState({snackbar:null})}/>})\n    })\n\n  }\n\n  render() {\n    const {\n      id\n    } = this.props\n    const {\n      friends\n    } = this.state\n    return (\n      <Panel id={id}>\n        <PanelHeader>Навести друзей</PanelHeader>\n        {\n          friends ? \n          friends.map((friend, i) => \n          <RichCell key={i} before={<Avatar size={64} src={friend.photo_200}/>} multiline\n          text={friend.status}\n          caption={friend.city == null || friend.country == null ? '??':<span>{friend.country.title+\", \"+friend.city.title}<br /> {\"День рождения \"+this.date(friend.bdate)}</span>}\n          after={friend.online == 1  ? <span style={{ color: 'var(--dynamic_green)', fontSize:12 }}>online</span> : (friend.last_seen ? <span style={{ fontSize: 12, color:'var(--dynamic_gray)'}}>{new Date(friend.last_seen.time*1000).toLocaleString('ru', {  year: 'numeric', month: 'numeric',day: 'numeric', hour: 'numeric',minute: 'numeric'})}</span>: <span style={{ color: 'var(--dynamic_gray)', fontSize:12}}>offline</span>)}\n          onClick={() => this.open(friend)}>\n          {friend.first_name+\" \"+friend.last_name}\n          </RichCell>\n          )\n          :\n          <Placeholder\n            icon={<Icon56UsersOutline />}\n            header=\"Друзья\"\n            action={<Button onClick={this.getFriends} size=\"l\">Показать список</Button>}\n          >\n            Чтобы получить список к друзьям, вам нужно предоставить доступ приложению.\n          </Placeholder>\n        }\n        {this.state.snackbar}\n      </Panel>\n    )\n  }\n}\n\nexport default Friends\n","import React, { Component } from 'react'\nimport SnackbarError from '../components/SnackbarError'; \nimport { Panel, PanelHeader, FormLayout, Header, Input, Select, Checkbox, Button, Div, RangeSlider, PanelHeaderBack, ScreenSpinner, SimpleCell, Cell, Switch, FormLayoutGroup, Tabs, TabsItem, Separator } from '@vkontakte/vkui'\nimport Icon28AddOutline from '@vkontakte/icons/dist/28/add_outline';\nimport Icon28CancelCircleOutline from '@vkontakte/icons/dist/28/cancel_circle_outline';\nimport Icon16Add from '@vkontakte/icons/dist/16/add';\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel';\nimport Icon28RecentOutline from '@vkontakte/icons/dist/28/recent_outline';\n\nimport SelectSearch from 'react-select-search';\n\nconst SEASONS_TRANSCRIPTION = {\n  'all': 'любое',\n  'winter': 'зима',\n  'spring': 'весна',\n  'summer': 'лето',\n  'fall': 'осень',\n};\n\nconst MONTHS_TRANSCRIPTION = {\n  0: 'любой',\n  1: 'январь', 2: 'февраль', 3: 'март', 4: 'апрель',\n  5: 'май', 6: 'июнь', 7: 'июль', 8: 'август',\n  9: 'сентябрь', 10: 'октябрь', 11: 'ноябрь', 12: 'декабрь',\n};\n\nconst CONTINENT_DST = {\n  all:\"любая\",\n  E:'Европа',\n  F:\"Африка\",\n  D:'Океания',\n  A:\"Азия\",\n  S:\"Южная Америка\",\n  N:\"Северная Америка\"\n}\n\nconst LANGUAGES = {\n  de: \"немецкий\",\n  en: \"английский\",\n  es: \"испанский\",\n  fr: \"французский\",\n  it: \"итальянский\",\n  ru: \"русский\",\n  th: \"тайский\",\n  tr: \"турецкий\"\n}\n\nconst CURRENCY = {\n  AZN: {name:\"манат\", min:5, max:7000},\n  BYN: {name:\"беларусский рубль\", min:10, max:10000},\n  CNY: {name:\"юань\", min:10, max:30000},\n  EUR: {name:\"евро\", min:1, max:4000},\n  KGS: {name:\"сом\", min:100, max:300000},\n  KZT: {name:\"тенге\", min:500, max:1500000},\n  RUB: {name:\"рубль\", min:100, max:300000},\n  THB: {name:\"бат\", min:10, max:150000},\n  UAH: {name:\"гривна\", min:50, max:100000},\n  USD: {name:\"доллар\", min:1, max:5000},\n  UZS: {name:\"сум\", min:500, max:500000}\n}\n\nconst PASSENGERS = {\n  url: \"1 пассажир, экономкласс\",\n  url2Passengers: \"2 пассажира, экономкласс\",\n  url1Business: \"1 пассажир, бизнес-класс\",\n  urlForma: \"другой вариант\"\n}\n\nconst checkbox = {\n  paddingTop:0, paddingBottom:0\n}\n\nexport class Settings extends Component {\n  state = {\n    data:[],\n    listCountry:[],\n    cities:[],\n    updated: \"60\",\n    interval: \"60\",\n    limit: \"0\",\n    countryDst:'all',\n    cityDst:'all',\n    datesCnt: [{\n      year: (new Date()).getFullYear(),\n      season: 'all',\n      month: '0'\n    }],\n    activeCnt:0,\n    language: 'ru',\n    dual: true,\n    forward: true,\n    profitability:30,\n    currency: 'RUB',\n    currencyForUrl: 'RUB',\n    passengers:'url',\n    randomCost:true,\n    randomTempDay:true,\n    randomTempNight:true,\n    costMin: 100,\n    costMax: 500000,\n    dayTempMin:-50,\n    dayTempMax:50,\n    interval:'60',\n    nighTempMin:-50,\n    nighTempMax:50,\n    days:[true, true, true, true, true, true, true],\n    allDays:true,\n    snackbar:null,\n    all_flight:true\n  }\n\n\n  componentDidMount() {\n    this.props.setPopout(<ScreenSpinner />);\n    fetch(`https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/Countries`)\n    .then(response => response.json())\n    .then(listCountry => {\n        listCountry.unshift({code:'all', nameTranslations:{ru:\"любая\"}})\n        let s = listCountry.filter(country => country.nameTranslations.ru.indexOf(this.props.state.user.country.title) > -1)[0];\n        fetch(`https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/Cities/byCountry/`+s.code)\n          .then(response => response.json())\n          .then(cities => {\n              cities.unshift({code:'all', nameTranslations:{ru:\"любая\"}})\n              let n = cities.filter(city => city.nameTranslations.ru != null && city.nameTranslations.ru.indexOf(this.props.state.user.city.title) > -1)[0];\n              console.log(n);\n              this.setState({ listCountry, cities, countrySrc:s.code,  countrySrcCode:s.nameTranslations.ru, citySrc:n.code, citySrcCode:n.nameTranslations.ru}, this.props.setPopout(null));\n        })\n    })\n\n    /**/\n  }\n\n  onChange = e => {\n    this.setState({\n      [e.currentTarget.name]: e.currentTarget.value\n    })\n  }\n\n  onChangeCheck = (e) => {\n    this.setState({\n      [e.currentTarget.name]: e.currentTarget.checked\n    })\n  }\n\n  onChangeFrom = e => {\n    const { datesCnt } = this.state\n    datesCnt[parseInt(e.currentTarget.id, 10)][e.currentTarget.name] = e.currentTarget.value\n    if([e.currentTarget.name] == 'year') {\n      console.log('p');\n      datesCnt[parseInt(e.currentTarget.id, 10)]['season'] = 'all';\n      datesCnt[parseInt(e.currentTarget.id, 10)]['month'] = 0;\n    }\n    this.setState({\n      datesCnt\n    })\n  }\n\n  addFrom = () => {\n    const { datesCnt } = this.state\n    datesCnt.push({\n      year: (new Date()).getFullYear(),\n      season: 'all',\n      month: '0'\n    })\n    this.setState({\n      datesCnt\n    })\n  }\n\n  removeFrom = () => {\n    const { datesCnt, activeCnt } = this.state\n    this.setState({\n      activeCnt: (activeCnt != 0 ? activeCnt -1 : 0),\n      datesCnt: datesCnt.splice(0, datesCnt.length-1)\n    })\n  }\n\n  onChangeDays = (e) => {\n    console.log(e.currentTarget.name);\n    if(e.currentTarget.name == 'all') {\n      this.setState({ allDays:!this.state.allDays, days:[false, false, false, false, false, false, false]});\n    }else{\n      //this.setState({ allDays:!this.state.allDays});\n      let bool = !this.state.days[Number(e.currentTarget.name)];\n      let days = this.state.days.splice([Number(e.currentTarget.name)], 1, bool);\n      console.log(this.state.days);\n      \n      let t = true;\n      this.state.days.forEach(e => {\n        if(!e) t = false\n      })\n      this.setState({ days:this.state.days, allDays:t });\n    }\n\n  }\n\n//готовим данные к отправке\n  sort_res = () => { \n    this.props.setPopout(<ScreenSpinner />)\n    const { user } = this.props.state;\n    const { citySrcCode, cityDstCode, countryDstCode, countrySrcCode,citySrc, cityDst, countryDst, countrySrc, costMax, costMin, currency,currencyForUrl,language, randomCost, dual,forward, datesCnt, profitability, dayTempMin, dayTempMax, nighTempMax, nighTempMin,passengers, updated, interval, limit, continentDst } = this.state;\n    let days;\n    if(this.state.allDays) {\n      days = [true, true, true, true, true, true, true];\n    }else{\n      days = this.state.days;\n    }\n    let output = {\n      citySrc:citySrcCode, \n      cityDst:cityDstCode,\n      countryDst:countryDstCode,\n      countrySrc:countrySrcCode,\n      continentDst,\n      costMax, \n      costMin,\n      currency,\n      currencyForUrl, \n      language,\n      randomCost,\n      forward,\n      dual,\n      passengers,\n      updated:Number(updated),\n      limit,\n      interval,\n      optional:true,\n      dates:datesCnt,\n      showAddionalWeather:true,\n      profitability:String(profitability),\n      ['nightTemp.max']:nighTempMax,\n      ['nightTemp.min']:nighTempMin,\n      ['dayTemp.max']:dayTempMax,\n      ['dayTemp.min']:dayTempMin,\n      days\n    }\n\n    let src_name;\n    let dst_name;\n    fetch(` https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20191125T185829Z.bafa3ff776a2185a.64a334987cf74f3b022d5c07a4b67f2247dbc05b&lang=ru-en&text=${citySrcCode}`)\n    .then(response => response.json())\n    .then(res => {\n      src_name = res.text;\n      fetch(` https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20191125T185829Z.bafa3ff776a2185a.64a334987cf74f3b022d5c07a4b67f2247dbc05b&lang=ru-en&text=${cityDstCode}`)\n      .then(response => response.json())\n      .then(res => {\n        dst_name = res.text;\n        let content = {\n          ['src.CountryCode']:countrySrc,\n          ['src.name']:src_name,\n          ['dst.name']:dst_name,\n          ['Discount']:{ ['$gte']:profitability},\n          ['SrcDayOfWeek']:{['$in']:days.map((item, i) => { if(item == true) return i})},\n          ['Dst.CountryCode']:(countryDst == 'all' ? null : countryDst),\n          ['Price']:{['$gte']:costMin, ['$lte']:costMax},\n          ['Temp.Max']:{['$gte']:dayTempMin, ['$lte']:dayTempMax},\n          ['Temp.Min']:{['$gte']:nighTempMin, ['$lte']:nighTempMax},\n          ['Dst.continentCode']:continentDst,\n        }\n        let obj = {\n          id:null,\n          interval:interval,\n          limit:limit,\n          updated:Number(updated),\n          user_id:user.id,\n          output,\n          content\n        }\n        //this.save_request(obj);\n        this.props.onChangeGroups('item', obj);\n        this.props.openModal('confirm_settings');\n        this.props.setPopout(null);\n      })\n    })\n\n\n\n\n  }\n\n// автокомплит стран\n  searchCountry = (value, obj, name) => { // автокомплит\n        let type = 'citySrc';\n        if(name == 'countryDst') type = 'cityDst';\n        this.setState({ [name]: value, [type]:null });\n        this.props.setPopout(<ScreenSpinner />)\n        if(value !== 'all') {\n        fetch(`https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/Cities/byCountry/${value}`)\n        .then(response => response.json())\n        .then(list => {\n          list.unshift({code:'all', nameTranslations:{ ru: \"любой\"}})\n          let nameCountry = name+\"Code\";\n          this.setState({cities:list, [nameCountry]: obj.name})\n      })\n      }\n      this.props.setPopout(null)\n  }\n\n//// автокомплит городов\n  searchCity = (value, obj, name) => {\n    let nameCity = name+\"Code\";\n    this.setState({ [name]: value, [nameCity]: obj.name});\n    console.log(this.state)\n  }\n\n\n\n  render() {\n    const {\n      id,\n      state,\n    } = this.props\n    const {\n      datesCnt,\n      currency,\n      currencyForUrl,\n      language,\n      countrySrc,\n      countrySrcCode,\n      countryDstCode,\n      citySrc,\n      countryDst,\n      cityDst,\n      continentDst,\n      randomCost,\n      randomTempDay,\n      randomTempNight,\n      costMin,\n      costMax,\n      dayTempMin,\n      dayTempMax,\n      nighTempMax,\n      nighTempMin,\n      days,\n      dual,\n      updated,\n      interval,\n      forward,\n      activeCnt,\n      all_flight\n    } = this.state\n    return (\n      <Panel id={id}>\n        <PanelHeader left={<PanelHeaderBack onClick={() => this.props.go('home')}/>}>Мой выбор</PanelHeader>\n        <FormLayout>\n        <Header style={{ color: 'var(--accent)' }}>Откуда</Header>\n          <FormLayoutGroup top=\"Страна\">\n            <div align=\"left\" style={{ padding:\"0 12px\"}}>\n              <SelectSearch \n                placeholder=\"Выберите страну\" \n                options={this.state.listCountry.filter((el) => el.code != 'all').map((el, i) => {return {name: el.nameTranslations.ru, value: el.code}})} \n                value={countrySrc} \n                onChange={(value, obj) => this.searchCountry(value, obj, \"countrySrc\")}\n                search\n              />\n           </div>\n          </FormLayoutGroup>\n         {countrySrcCode != null ? \n          <FormLayoutGroup top=\"Город\">\n          <div align=\"left\" style={{ padding:\"0 12px\"}}>\n            <SelectSearch \n              placeholder=\"Выберете город\" \n              options={this.state.cities.filter((el) => el.code != 'all').map((el, i) => {return {name: el.nameTranslations.ru, value: el.code}})} \n              value={citySrc} \n              onChange={(value, obj) => this.searchCity(value, obj, \"citySrc\")}\n              search\n            />\n         </div>\n        </FormLayoutGroup>:null\n         }\n         </FormLayout>\n         <datalist id='citySrc'>\n             <option>любой</option>\n            {this.state.data.map((city) => \n             <option value={city.nameTranslations.ru}>{city.code}</option>\n            )}\n          </datalist>\n          <FormLayout>\n          <Header style={{ color: 'var(--accent)' }}>Куда</Header>\n\n          <Select\n  \n            top=\"Часть света\"\n            name=\"continentDst\"\n            onChange={(e) => { this.onChange(e); this.setState({countryDst:'all', cityDst:'all'}, console.log(this.state)) }}\n            value={continentDst}\n          >\n            {\n              Object.keys(CONTINENT_DST).map((continent) => \n                <option value={continent} key={continent}>\n                  {CONTINENT_DST[continent]}\n                </option>\n              )\n            }\n          </Select>\n            {continentDst == null || continentDst == 'all' ? null :\n          <FormLayoutGroup top=\"Страна\">\n          <div align=\"left\" style={{ padding:\"0 12px\"}}>\n            <SelectSearch \n              placeholder=\"Выберите страну\" \n              options={this.state.listCountry.filter(city => city.continentCode == continentDst || city.code == 'all').map((el, i) => {return {name: el.nameTranslations.ru, value: el.code}})} \n              value={countryDst} \n              onChange={(value, obj) => this.searchCountry(value, obj, \"countryDst\")}\n              search\n            />\n         </div>\n        </FormLayoutGroup>}\n\n          {countryDst == 'all' || countryDst == null || continentDst == 'all' ? null :\n          <FormLayoutGroup top=\"Город\">\n          <div align=\"left\" style={{ padding:\"0 12px\"}}>\n            <SelectSearch \n              placeholder=\"Выберите город\" \n              options={this.state.cities.map((el, i) => {return {name: el.nameTranslations.ru, value: el.code}})} \n              value={countryDst} \n              onChange={(value, obj) => this.searchCity(value, obj, \"cityDst\")}\n              search\n            />\n         </div>\n        </FormLayoutGroup>\n            }\n\n\n      <Header>Когда</Header>\n          <Tabs mode=\"buttons\">\n            {datesCnt && (\n              datesCnt.map((item, i) => <TabsItem style={{ marginLeft: 12 }} selected={activeCnt == i} onClick={() => this.setState({ activeCnt: i })}><Icon28RecentOutline fill={activeCnt == i ? '#0E62F1':'#4BBDE7'}/></TabsItem>)\n            )}\n            {datesCnt.length < 3 && <TabsItem onClick={this.addFrom}><Icon16Add /></TabsItem>}\n            {datesCnt.length > 1 && <TabsItem onClick={this.removeFrom} ><Icon16Cancel fill=\"rgb(255, 26, 0)\"/></TabsItem>}\n          </Tabs>\n          </FormLayout>\n                <FormLayout key={activeCnt}>\n                  <Header mode='secondary'>{\"Период вылета(\"+(activeCnt+1)+\")\"}</Header>\n                  <Select\n                    top={`год`}\n                    name=\"year\"\n                    id={activeCnt}\n                    onChange={this.onChangeFrom}\n                    value={datesCnt[activeCnt].year}\n                  >\n                    {\n                      Array.from(Array(31).keys()).map((year) => \n                        <option key={year} value={(new Date()).getFullYear()+year}>\n                          {(new Date()).getFullYear()+year}\n                        </option>\n                      )\n                    }\n                  </Select>\n                  <Select\n                    top={`время года`}\n                    name=\"season\"\n                    id={activeCnt}\n                    onChange={this.onChangeFrom}\n                    value={datesCnt[activeCnt].season}\n                  >\n                    {\n                      Object.keys(SEASONS_TRANSCRIPTION).filter((e) => {\n                        let s = e;\n                        let m = new Date().getMonth()+1;\n                      if(new Date().getFullYear() == datesCnt[activeCnt].year) {\n                        if(s == 'all') \n                          return s;\n                        if(s == 'winter' && m <= 12)\n                          return s;\n                        if(s == 'spring' && m <= 5) \n                          return s;\n                        if(s == 'summer' && m <= 8) \n                          return s;\n                        if(s == 'fall' && m <= 11)\n                          return s;\n                      }else return e;\n                      }).map((season) => \n                        <option value={season} key={season}>\n                          {SEASONS_TRANSCRIPTION[season]}\n                        </option>\n                      )\n                    }\n                  </Select>     \n                 <Select\n                    top={`месяц`}\n                    name=\"month\"\n                    id={activeCnt}\n                    onChange={this.onChangeFrom}\n                    value={datesCnt[activeCnt].month}\n                  >\n                    {\n                      Object.keys(MONTHS_TRANSCRIPTION).filter((n) => {\n                        if(n == 0) {\n                          return n;\n                        }\n                        let m = new Date().getMonth()+1;\n                       if(new Date().getFullYear() == datesCnt[activeCnt].year) { \n                        switch(datesCnt[activeCnt].season) {\n                          case 'all': \n                            return n;\n                          break;\n\n                          case 'winter':\n                            if((n == 12 && m <= n) || (n == 1 && m <= n) || (n == 2 && m <= n)) {\n                              return n;\n                            }\n                          break;  \n                          case 'summer':\n                            if((n == 6 && m <= n) || (n == 7 && m <= n) || (n == 8 && m <= n)) {\n                              return n;\n                            }\n                          break;  \n                          case 'fall':\n                            if((n == 9 && n >= m) || (n == 10 && n >= m) || (n == 11 && n >= m)) {\n                              return n;\n                            }\n                          break; \n\n                          case 'spring':\n                            if((n == 3 && n >= m) || (n == 4 && n >= m) || (n == 5 && n >= m)) {\n                              return n;\n                            }\n                          break;  \n                        }\n                      }else{\n                        switch(datesCnt[activeCnt].season) {\n                          case 'all': \n                            return n;\n                          break;\n\n                          case 'winter':\n                            if((n == 12 ) || (n == 1) || (n == 2)) {\n                              return n;\n                            }\n                          break;  \n                          case 'summer':\n                            if((n == 6 ) || (n == 7) || (n == 8)) {\n                              return n;\n                            }\n                          break;  \n                          case 'fall':\n                            if((n == 9) || (n == 10) || (n == 11)) {\n                              return n;\n                            }\n                          break; \n\n                          case 'spring':\n                            if((n == 3 ) || (n == 4 ) || (n == 5)) {\n                              return n;\n                            }\n                          break;  \n                        }\n                      }\n                      }).map((month) => \n                        <option value={month} key={month}>\n                          {MONTHS_TRANSCRIPTION[month]}\n                        </option>\n                      )\n                    }\n                  </Select>\n                  </FormLayout>\n              <FormLayout>     \n\n       <Select\n            top=\"Пассажиры\"\n            name=\"passengers\"\n            onChange={this.onChange}\n          >\n            {\n              Object.keys(PASSENGERS).map((passengers) => \n                <option value={passengers} key={passengers}>\n                  {PASSENGERS[passengers]}\n                </option>\n              )\n            }\n          </Select>             \n      \n      <Header style={{ color: 'var(--accent)' }}>Выберите условия</Header>\n          <Select\n            top=\"Получать дешевые авиабилеты один раз в\"\n            name=\"interval\"\n            onChange={this.onChange}\n          >\n            <option value=\"60\">1 час</option>\n            <option value=\"240\">4 часа</option>\n            <option value=\"480\">8 часов</option>\n            <option value=\"1440\">24 часа</option>\n          </Select>\n\n          <Select\n            top=\"Получать информацию за крайние N, часов\"\n            name=\"updated\"\n            onChange={this.onChange}\n            defaultValue=\"60\"\n          >\n      <option value=\"60\">1 час</option>\n      {Number(interval) > 60 ? <option value=\"120\">2 часа</option> : null}\n      {Number(interval) > 60 ? <option value=\"180\">3 часа</option> : null}\n      {Number(interval) > 60 ? <option value=\"240\">4 часа</option> : null}\n      {Number(interval) > 240 ? <option value=\"240\">5 часов</option> : null}\n      {Number(interval) > 240 ? <option value=\"240\">6 часов</option> : null}\n      {Number(interval) > 240 ? <option value=\"240\">7 часов</option> : null}\n      {Number(interval) > 240 ? <option value=\"240\">8 часов</option> : null}\n      </Select>\n\n          <Select\n            top=\"Сколько дешевых авиабилетов показывать в сутки?\"\n            name=\"limit\"\n            defaultValue=\"0\"\n          >\n            <option value=\"0\">все</option>\n            <option value=\"20\">20</option>\n            <option value=\"50\">50</option>\n            <option value=\"100\">100</option>\n            <option value=\"300\">300</option>\n          </Select>\n          \n          <FormLayoutGroup top=\"Направление полетов\">\n            <SimpleCell after={<Switch name=\"all_flight\" style={checkbox} onChange={(e) => { this.onChangeCheck(e); this.setState({ forward: e.target.checked, dual:e.target.checked})}} checked={all_flight || (dual && forward)} />}>любое</SimpleCell>\n            {!all_flight && <SimpleCell after={<Switch name=\"forward\" onChange={this.onChangeCheck} checked={forward} />}>туда</SimpleCell>}\n            {!all_flight && <SimpleCell after={<Switch name=\"dual\" style={checkbox} onChange={this.onChangeCheck} checked={dual} />}>туда-обратно</SimpleCell>}\n          </FormLayoutGroup>  \n            \n         \n          <Select\n            top=\"Язык\"\n            name=\"language\"\n            onChange={this.onChange}\n            value={language}\n          >\n            {\n              Object.keys(LANGUAGES).map((language) => \n                <option value={language} key={language}>\n                  {LANGUAGES[language]}\n                </option>\n              )\n            }\n          </Select>\n          <Select\n            top=\"Валюта в билете\"\n            name=\"currency\"\n            onChange={(e) => {this.onChange(e); this.setState({randomCost:true, costMin:CURRENCY[e.currentTarget.value].min, costMax:CURRENCY[e.currentTarget.value].max})}}\n            value={currency}\n          >\n            {\n              Object.keys(CURRENCY).map((currency) => \n                <option value={currency} key={currency}>\n                  {CURRENCY[currency].name}\n                </option>\n              )\n            }\n          </Select>\n          <Select\n            top=\"Валюта покупки\"\n            name=\"currencyForUrl\"\n            onChange={this.onChange}\n            value={currencyForUrl}\n          >\n            {\n              Object.keys(CURRENCY).map((currency) => \n                <option value={currency} key={currency}>\n                  {CURRENCY[currency].name}\n                </option>\n              )\n            }\n          </Select>\n\n          <FormLayoutGroup top={\"Выберите минимальную и максимальную стоимость авиабилетов, \" + currency}>\n          \n\n           <SimpleCell after={\n                       <Switch\n                       checked={randomCost}\n                       onChange={(e) => {\n                         this.setState({\n                           costMin: e.currentTarget.checked ? CURRENCY[currency].min : costMin,\n                           costMax: e.currentTarget.checked ? CURRENCY[currency].max : costMax,\n                           randomCost: e.currentTarget.checked\n                         })\n                       }}\n                     />\n           }>любая</SimpleCell>\n            \n           {!randomCost &&\n          <RangeSlider\n            top={costMin + \" - \" + costMax}\n            min={CURRENCY[currency].min}\n            max={CURRENCY[currency].max}\n            step={100}\n            defaultValue={[CURRENCY[currency].min, CURRENCY[currency].max]}\n            value={[costMin, costMax]}\n            onChange={(value) => {\n              this.setState({\n                costMin: value[0],\n                costMax: value[1],\n                randomCost: false\n              })\n            }}\n          />\n          }\n          {!randomCost &&\n          <div style={{ display: 'flex' }}>\n            <Input\n              onFocus={() => {\n                console.log('focus')\n              }}\n              value={costMin}\n              type=\"number\"\n              onChange={(e) => {\n                const value = parseInt(e.currentTarget.value, 10)\n                if(value){\n                  if(value < costMax && value >= CURRENCY[currency].min){\n                    this.setState({ costMin: value })\n                  }\n                }\n              }}\n            />\n            <Input\n              value={costMax}\n              type=\"number\"\n              onChange={(e) => {\n                const value = parseInt(e.currentTarget.value, 10)\n                if(value){\n                  if(value > costMin && value <= CURRENCY[currency].max){\n                    this.setState({ costMax: value })\n                  }\n                }\n              }}\n            />\n          </div>\n  }\n          </FormLayoutGroup> \n          <Select name='profitability' onChange={this.onChange} top=\"Показывать авиабилеты только с выгодой больше, %\">\n            <option>30</option>\n            <option>40</option>\n            <option>50</option>\n            <option>60</option>\n            <option>70</option>\n            <option>80</option>\n            <option>90</option>\n          </Select>\n          <FormLayoutGroup top=\"Хочу вылететь в определенный день недели\">\n              <SimpleCell after={<Switch checked={this.state.allDays} name='all' onChange={this.onChangeDays} />}>в любой</SimpleCell>\n              {!this.state.allDays &&\n              <div>\n                <SimpleCell after={<Switch name='0' onChange={this.onChangeDays} checked={days[0] || this.state.allDays} />}>понедельник</SimpleCell>\n                <SimpleCell after={<Switch name='1' onChange={this.onChangeDays} checked={days[1] || this.state.allDays} />}>вторник</SimpleCell>\n                <SimpleCell after={<Switch name='2' onChange={this.onChangeDays} checked={days[2] || this.state.allDays} />}>среда</SimpleCell>\n                <SimpleCell after={<Switch name='3' onChange={this.onChangeDays} checked={days[3] || this.state.allDays} />}>четверг</SimpleCell>\n                <SimpleCell after={<Switch name='4' onChange={this.onChangeDays} checked={days[4] || this.state.allDays} />}>пятница</SimpleCell>\n                <SimpleCell after={<Switch name='5' onChange={this.onChangeDays} checked={days[5] || this.state.allDays} />}>суббота</SimpleCell>\n                <SimpleCell after={<Switch name='6' onChange={this.onChangeDays} checked={days[6] || this.state.allDays} />}>воскресенье</SimpleCell>\n                \n              \n              \n              \n              \n              \n              \n              </div>\n              }\n          </FormLayoutGroup>  \n          <FormLayoutGroup top=\"Температура воздуха днем в день прилета, C\">\n              <SimpleCell after={          \n          <Switch\n            checked={randomTempDay}\n            onChange={(e) => {\n              this.setState({\n                dayTempMin: e.currentTarget.checked ? -50 : dayTempMin,\n                dayTempMax: e.currentTarget.checked ?  50 : dayTempMax,\n                randomTempDay: e.currentTarget.checked\n              })\n            }}\n          />}>\n                любая\n              </SimpleCell>\n\n            \n         {!randomTempDay &&\n          <RangeSlider\n            min={-50}\n            max={50}\n            step={1}\n            defaultValue={[-50, 50]}\n            value={[dayTempMin, dayTempMax]}\n            onChange={(value) => {\n              this.setState({\n                dayTempMin: value[0],\n                dayTempMax: value[1],\n                randomTempDay: false\n              })\n            }}\n          />\n          }\n          {!randomTempDay &&\n          <div style={{ display: 'flex' }}>\n            <Input\n              onFocus={() => {\n                console.log('focus')\n              }}\n              value={dayTempMin}\n              type=\"number\"\n              onChange={(e) => {\n                const value = parseInt(e.currentTarget.value, 10)\n                if(value){\n                  if(value < dayTempMax && value >= -50){\n                    this.setState({ dayTempMin: value })\n                  }\n                }\n              }}\n            />\n            <Input\n              value={dayTempMax}\n              type=\"number\"\n              onChange={(e) => {\n                const value = parseInt(e.currentTarget.value, 10)\n                if(value){\n                  if(value > dayTempMin && value <= 50){\n                    this.setState({ dayTempMax: value })\n                  }\n                }\n              }}\n            />\n          </div>\n          }     \n          </FormLayoutGroup>\n          \n          <FormLayoutGroup top=\"Температура воздуха ночью в день прилета, C\">     \n            <SimpleCell after={\n                         <Switch\n                         checked={randomTempNight}\n                         onChange={(e) => {\n                           this.setState({\n                             nighTempMin: e.currentTarget.checked ? -50 : nighTempMin,\n                             nighTempMax: e.currentTarget.checked ?  50 : nighTempMax,\n                             randomTempNight: e.currentTarget.checked\n                           })\n                         }}\n                       />\n            }>любая</SimpleCell>    \n\n          {!randomTempNight &&\n          <RangeSlider\n            min={-50}\n            max={50}\n            step={1}\n            defaultValue={[-50, 50]}\n            value={[nighTempMin, nighTempMax]}\n            onChange={(value) => {\n              this.setState({\n                nighTempMin: value[0],\n                nighTempMax: value[1],\n                randomTempNight: false\n              })\n            }}\n          />\n          }\n          {!randomTempNight && \n           <div style={{ display: 'flex' }}>\n            <Input\n              onFocus={() => {\n                console.log('focus')\n              }}\n              value={nighTempMin}\n              type=\"number\"\n              onChange={(e) => {\n                const value = parseInt(e.currentTarget.value, 10)\n                if(value){\n                  if(value < nighTempMin && value >= -50){\n                    this.setState({ nighTempMin: value })\n                  }\n                }\n              }}\n            />\n            <Input\n              value={nighTempMax}\n              type=\"number\"\n              onChange={(e) => {\n                const value = parseInt(e.currentTarget.value, 10)\n                if(value){\n                  if(value > nighTempMax && value <= 50){\n                    this.setState({ nighTempMax: value })\n                  }\n                }\n              }}\n            />\n          </div>\n            }\n          </FormLayoutGroup>\n          <Button mode='primary' size='xl' onClick={this.sort_res}>Подписаться</Button>\n        </FormLayout>\n        {this.state.snackbar}\n      </Panel>\n    )\n  }\n}\n\nexport default Settings \n","\r\nimport React, { Component } from 'react'\r\nimport SnackbarError from '../components/SnackbarError'; \r\nimport { Panel, PanelHeader, FormLayout, Header, Input, Select, FormLayoutGroup, Button, Div, RangeSlider, SelectMimicry, ScreenSpinner, SimpleCell, Cell, Switch, PanelHeaderBack, Tabs, TabsItem, Separator } from '@vkontakte/vkui'\r\nimport Icon16Add from '@vkontakte/icons/dist/16/add';\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel';\r\n\r\nimport SelectSearch from 'react-select-search';\r\n\r\nconst checkbox = {\r\n  paddingTop:0, paddingBottom:0\r\n}\r\n\r\nconst SEASONS_TRANSCRIPTION = {\r\n  'all': 'любое',\r\n  'winter': 'зима',\r\n  'spring': 'весна',\r\n  'summer': 'лето',\r\n  'fall': 'осень',\r\n};\r\n\r\nconst MONTHS_TRANSCRIPTION = {\r\n  0: 'любой',\r\n  1: 'январь', 2: 'февраль', 3: 'март', 4: 'апрель',\r\n  5: 'май', 6: 'июнь', 7: 'июль', 8: 'август',\r\n  9: 'сентябрь', 10: 'октябрь', 11: 'ноябрь', 12: 'декабрь',\r\n};\r\n\r\nconst CONTINENT_DST = {\r\n  all:\"любая\",\r\n  E:'Европа',\r\n  F:\"Африка\",\r\n  D:'Океания',\r\n  A:\"Азия\",\r\n  S:\"Южная Америка\",\r\n  N:\"Северная Америка\"\r\n}\r\n\r\nconst LANGUAGES = {\r\n  de: \"немецкий\",\r\n  en: \"английский\",\r\n  es: \"испанский\",\r\n  fr: \"французский\",\r\n  it: \"итальянский\",\r\n  ru: \"русский\",\r\n  th: \"тайский\",\r\n  tr: \"турецкий\"\r\n}\r\n\r\nconst CURRENCY = {\r\n  AZN: {name:\"манат\", min:5, max:7000},\r\n  BYN: {name:\"беларусский рубль\", min:10, max:10000},\r\n  CNY: {name:\"юань\", min:10, max:30000},\r\n  EUR: {name:\"евро\", min:1, max:4000},\r\n  KGS: {name:\"сом\", min:100, max:300000},\r\n  KZT: {name:\"тенге\", min:500, max:1500000},\r\n  RUB: {name:\"рубль\", min:100, max:300000},\r\n  THB: {name:\"бат\", min:10, max:150000},\r\n  UAH: {name:\"гривна\", min:50, max:100000},\r\n  USD: {name:\"доллар\", min:1, max:5000},\r\n  UZS: {name:\"сум\", min:500, max:500000}\r\n}\r\n\r\nconst PASSENGERS = {\r\n  url: \"1 пассажир, экономкласс\",\r\n  url2Passengers: \"2 пассажира, экономкласс\",\r\n  url1Business: \"1 пассажир, бизнес-класс\",\r\n  urlForma: \"другой вариант\"\r\n}\r\n\r\nexport class EditSettings extends Component {\r\n\r\n  state = {\r\n    data:[],\r\n    listCountry:[],\r\n    cityDstList:[],\r\n    citySrcList:[],\r\n    continentDst:this.props.state.form.continentDst,\r\n    updated: this.props.state.form.updated,\r\n    countrySrcCode: this.props.state.form.countrySrc,\r\n    citySrcCode: this.props.state.form.citySrc,\r\n    countryDstCode: this.props.state.form.countryDst,\r\n    cityDstCode: this.props.state.form.cityDst,\r\n    limit: this.props.state.form.limit,\r\n    datesCnt: this.props.state.form.dates,\r\n    language: this.props.state.form.language,\r\n    profitability:this.props.state.form.profitability,\r\n    currency: this.props.state.form.currency,\r\n    currencyForUrl: this.props.state.form.currencyForUrl,\r\n    passengers:this.props.state.form.passengers,\r\n    randomCost:this.props.state.form.randomCost,\r\n    costMin: this.props.state.form.costMin,\r\n    costMax: this.props.state.form.costMax,\r\n    dayTempMin: this.props.state.form['dayTemp.min'],\r\n    dayTempMax: this.props.state.form['dayTemp.max'],\r\n    interval: this.props.state.form.interval,\r\n    nighTempMin:this.props.state.form['nightTemp.min'],\r\n    nighTempMax:this.props.state.form['nightTemp.max'],\r\n    dual:this.props.state.form.dual,\r\n    forward:this.props.state.form.forward,\r\n    days:this.props.state.form.days,\r\n    allDays:(this.props.state.form.days.indexOf(false) == -1 ? true : false),\r\n    all_flight:(this.props.state.form.dual && this.props.state.form.forward),\r\n    randomTempDay:(this.props.state.form['dayTemp.min'] == -50 && this.props.state.form['dayTemp.max'] == 50),\r\n    randomTempNight:(this.props.state.form['nightTemp.min'] == -50 && this.props.state.form['nightTemp.max'] == 50),\r\n    activeCnt:0,\r\n    snackbar:null\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setPopout(<ScreenSpinner />);\r\n    fetch(`https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/Countries`)\r\n    .then(response => response.json())\r\n    .then(listCountry => {\r\n        listCountry.unshift({code:'all', nameTranslations:{ru:\"любая\"}})\r\n        let s = listCountry.filter(country => country.nameTranslations.ru.indexOf(this.state.countrySrcCode) > -1)[0];\r\n        console.log(s, this.state);\r\n        fetch(`https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/Cities/byCountry/`+s.code)\r\n          .then(response => response.json())\r\n          .then(cities => {\r\n              cities.unshift({code:'all', nameTranslations:{ru:\"любая\"}})\r\n              let n = cities.filter(city => city.nameTranslations.ru != null && city.nameTranslations.ru.indexOf(this.state.citySrcCode) > -1)[0];\r\n              console.log(n);\r\n              this.setState({ listCountry, citySrcList:cities, countrySrc:s.code,  countrySrcCode:s.nameTranslations.ru, citySrc:n.code, citySrcCode:n.nameTranslations.ru});\r\n              \r\n              if(this.state.countryDstCode != null) {\r\n                let i = listCountry.filter(country => country.nameTranslations.ru.indexOf(this.state.countryDstCode) > -1)[0];\r\n                fetch(`https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/Cities/byCountry/`+i.code)\r\n                .then(response => response.json())\r\n                .then(cities => {\r\n                    cities.unshift({code:'all', nameTranslations:{ru:\"любая\"}})\r\n                    let p = cities.filter(city => city.nameTranslations.ru != null && city.nameTranslations.ru.indexOf(this.state.citySrcCode) > -1)[0];\r\n                    console.log(n);\r\n                    this.setState({ listCountry, cityDstList:cities, countryDst:i.code,  countryDstCode:i.nameTranslations.ru, cityDst:p.code, cityDstCode:p.nameTranslations.ru});\r\n                  \r\n                })\r\n              } \r\n              this.props.setPopout(null)\r\n        })\r\n    })\r\n\r\n    /**/\r\n  }\r\n  \r\n\r\n\r\n  onChange = e => {\r\n    this.setState({\r\n      [e.currentTarget.name]: e.currentTarget.value\r\n    })\r\n  }\r\n\r\n  onChangeFrom = e => {\r\n    const { datesCnt } = this.state\r\n    datesCnt[parseInt(e.currentTarget.id, 10)][e.currentTarget.name] = e.currentTarget.value\r\n    this.setState({\r\n      datesCnt\r\n    })\r\n  }\r\n\r\n  addFrom = () => {\r\n    const { datesCnt } = this.state\r\n    datesCnt.push({\r\n      yearSrc: (new Date()).getFullYear(),\r\n      seasonSrc: SEASONS_TRANSCRIPTION['all'],\r\n      monthSrc: MONTHS_TRANSCRIPTION['0']\r\n    })\r\n    this.setState({\r\n      datesCnt\r\n    })\r\n  }\r\n\r\n  removeFrom = () => {\r\n    const { datesCnt } = this.state\r\n    this.setState({\r\n      datesCnt: datesCnt.splice(0, datesCnt.length-1)\r\n    })\r\n  }\r\n\r\n  onChangeDays = (e) => {\r\n    console.log(e.currentTarget.name);\r\n    if(e.currentTarget.name == 'all') {\r\n      this.setState({ allDays:!this.state.allDays});\r\n    }else{\r\n      let bool = !this.state.days[Number(e.currentTarget.name)];\r\n      let days = this.state.days.splice([Number(e.currentTarget.name)], 1, bool);\r\n      console.log(this.state.days);\r\n      \r\n      let t = true;\r\n      this.state.days.forEach(e => {\r\n        if(!e) t = false\r\n      })\r\n      this.setState({ days:this.state.days, allDays:t });\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  sort_res = () => { \r\n    this.props.setPopout(<ScreenSpinner />)\r\n    const { user } = this.props.state;\r\n    const { citySrcCode, cityDstCode, countryDstCode, countrySrcCode,citySrc, cityDst, countryDst, countrySrc, costMax, costMin, currency,currencyForUrl,language, randomCost, dual,forward, datesCnt, profitability, dayTempMin, dayTempMax, nighTempMax, nighTempMin,passengers, updated, interval, limit, continentDst } = this.state;\r\n    let days;\r\n    if(this.state.allDays) {\r\n      days = [true, true, true, true, true, true, true];\r\n    }else{\r\n      days = this.state.days;\r\n    }\r\n    let output = {\r\n      citySrc:citySrcCode, \r\n      cityDst:cityDstCode,\r\n      countryDst:countryDstCode,\r\n      countrySrc:countrySrcCode,\r\n      continentDst,\r\n      costMax, \r\n      costMin,\r\n      currency,\r\n      currencyForUrl, \r\n      language,\r\n      randomCost,\r\n      forward,\r\n      dual,\r\n      passengers,\r\n      updated:Number(updated),\r\n      limit,\r\n      interval,\r\n      optional:true,\r\n      dates:datesCnt,\r\n      showAddionalWeather:true,\r\n      profitability:String(profitability),\r\n      ['nightTemp.max']:nighTempMax,\r\n      ['nightTemp.min']:nighTempMin,\r\n      ['dayTemp.max']:dayTempMax,\r\n      ['dayTemp.min']:dayTempMin,\r\n      days\r\n    }\r\n\r\n    let src_name;\r\n    let dst_name;\r\n    fetch(` https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20191125T185829Z.bafa3ff776a2185a.64a334987cf74f3b022d5c07a4b67f2247dbc05b&lang=ru-en&text=${citySrcCode}`)\r\n    .then(response => response.json())\r\n    .then(res => {\r\n      src_name = res.text;\r\n      fetch(` https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20191125T185829Z.bafa3ff776a2185a.64a334987cf74f3b022d5c07a4b67f2247dbc05b&lang=ru-en&text=${cityDstCode}`)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        dst_name = res.text;\r\n        let content = {\r\n          ['src.CountryCode']:countrySrc,\r\n          ['src.name']:src_name,\r\n          ['dst.name']:dst_name,\r\n          ['Discount']:{ ['$gte']:profitability},\r\n          ['SrcDayOfWeek']:{['$in']:days.map((item, i) => { if(item == true) return i})},\r\n          ['Dst.CountryCode']:(countryDst == 'all' ? null : countryDst),\r\n          ['Price']:{['$gte']:costMin, ['$lte']:costMax},\r\n          ['Temp.Max']:{['$gte']:dayTempMin, ['$lte']:dayTempMax},\r\n          ['Temp.Min']:{['$gte']:nighTempMin, ['$lte']:nighTempMax},\r\n          ['Dst.continentCode']:continentDst,\r\n        }\r\n        let obj = {\r\n          id:this.props.state.form.id,\r\n          interval:interval,\r\n          limit:limit,\r\n          updated:Number(updated),\r\n          user_id:user.id,\r\n          output,\r\n          content\r\n        }\r\n        //this.save_request(obj);\r\n        this.props.onChangeGroups('item', obj);\r\n        this.props.openModal('confirm_settings');\r\n        this.props.setPopout(null);\r\n      })\r\n    })\r\n  }\r\n\r\n// автокомплит стран\r\nsearchCountry = (value, obj, name) => { // автокомплит\r\n  let type = 'citySrc';\r\n  if(name == 'countryDst') type = 'cityDst';\r\n  this.setState({ [name]: value, [type]:null });\r\n  this.props.setPopout(<ScreenSpinner />)\r\n  if(value !== 'all') {\r\n  fetch(`https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/Cities/byCountry/${value}`)\r\n  .then(response => response.json())\r\n  .then(list => {\r\n    list.unshift({code:'all', nameTranslations:{ ru: \"любой\"}})\r\n    let nameCountry = name+\"Code\";\r\n    let nameList = type+\"List\";\r\n    this.setState({[nameList]:list, [nameCountry]: obj.name})\r\n})\r\n}\r\nthis.props.setPopout(null)\r\n}\r\n\r\n//// автокомплит городов\r\nsearchCity = (value, obj, name) => {\r\nlet nameCity = name+\"Code\";\r\nthis.setState({ [name]: value, [nameCity]: obj.name});\r\nconsole.log(this.state)\r\n}\r\n\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      state\r\n    } = this.props\r\n    const {\r\n      datesCnt,\r\n      currency,\r\n      currencyForUrl,\r\n      language,\r\n      countrySrc,\r\n      countrySrcCode,\r\n      countryDstCode,\r\n      citySrc,\r\n      countryDst,\r\n      cityDst,\r\n      continentDst,\r\n      randomCost,\r\n      randomTempDay,\r\n      randomTempNight,\r\n      costMin,\r\n      costMax,\r\n      dayTempMin,\r\n      dayTempMax,\r\n      nighTempMax,\r\n      nighTempMin,\r\n      days,\r\n      dual,\r\n      updated,\r\n      interval,\r\n      forward,\r\n      activeCnt,\r\n      all_flight\r\n    } = this.state\r\n    return (\r\n      <Panel id={id}>\r\n        <PanelHeader left={<PanelHeaderBack onClick={() => this.props.go('home')}/>}>Параметры</PanelHeader>\r\n        <FormLayout>\r\n        <Header style={{ color: 'var(--accent)' }}>Откуда</Header>\r\n          <FormLayoutGroup top=\"Страна\">\r\n            <div align=\"left\" style={{ padding:\"0 12px\"}}>\r\n              <SelectSearch \r\n                placeholder=\"Выберете страну\" \r\n                options={this.state.listCountry.filter((el) => el.code != 'all').map((el, i) => {return {name: el.nameTranslations.ru, value: el.code}})} \r\n                value={countrySrc} \r\n                onChange={(value, obj) => this.searchCountry(value, obj, \"countrySrc\")}\r\n                search\r\n              />\r\n           </div>\r\n          </FormLayoutGroup>\r\n         {countrySrcCode != null ? \r\n          <FormLayoutGroup top=\"Город\">\r\n          <div align=\"left\" style={{ padding:\"0 12px\"}}>\r\n            <SelectSearch \r\n              placeholder=\"Выберете город\" \r\n              options={this.state.citySrcList.filter((el) => el.code != 'all').map((el, i) => {return {name: el.nameTranslations.ru, value: el.code}})} \r\n              value={citySrc} \r\n              onChange={(value, obj) => this.searchCity(value, obj, \"citySrc\")}\r\n              search\r\n            />\r\n         </div>\r\n        </FormLayoutGroup>:null\r\n         }\r\n         </FormLayout>\r\n         <datalist id='citySrc'>\r\n             <option>любой</option>\r\n            {this.state.data.map((city) => \r\n             <option value={city.nameTranslations.ru}>{city.code}</option>\r\n            )}\r\n          </datalist>\r\n          <FormLayout>\r\n          <Header style={{ color: 'var(--accent)' }}>Куда</Header>\r\n\r\n          <Select\r\n  \r\n            top=\"Часть света\"\r\n            name=\"continentDst\"\r\n            onChange={(e) => { this.onChange(e); this.setState({countryDst:'all', cityDst:'all'}, console.log(this.state)) }}\r\n            value={continentDst}\r\n          >\r\n            {\r\n              Object.keys(CONTINENT_DST).map((continent) => \r\n                <option value={continent} key={continent}>\r\n                  {CONTINENT_DST[continent]}\r\n                </option>\r\n              )\r\n            }\r\n          </Select>\r\n            {continentDst == null || continentDst == 'all' ? null :\r\n          <FormLayoutGroup top=\"Страна\">\r\n          <div align=\"left\" style={{ padding:\"0 12px\"}}>\r\n            <SelectSearch \r\n              placeholder=\"Выберете страну\" \r\n              options={this.state.listCountry.filter(city => city.continentCode == continentDst || city.code == 'all').map((el, i) => {return {name: el.nameTranslations.ru, value: el.code}})} \r\n              value={countryDst} \r\n              onChange={(value, obj) => this.searchCountry(value, obj, \"countryDst\")}\r\n              search\r\n            />\r\n         </div>\r\n        </FormLayoutGroup>}\r\n\r\n          {countryDst == 'all' || countryDst == null || continentDst == 'all' ? null :\r\n          <FormLayoutGroup top=\"Город\">\r\n          <div align=\"left\" style={{ padding:\"0 12px\"}}>\r\n            <SelectSearch \r\n              options={this.state.cityDstList.map((el, i) => {return {name: el.nameTranslations.ru, value: el.code}})} \r\n              value={countryDst} \r\n              onChange={(value, obj) => this.searchCity(value, obj, \"cityDst\")}\r\n              search\r\n            />\r\n         </div>\r\n        </FormLayoutGroup>\r\n            }\r\n      \r\n      <Header style={{ color: 'var(--accent)' }}>Выберите условия</Header>\r\n          <Select\r\n            top=\"Получать дешевые авиабилеты один раз в\"\r\n            name=\"interval\"\r\n            onChange={this.onChange}\r\n          >\r\n            <option value=\"60\">1 час</option>\r\n            <option value=\"240\">4 часа</option>\r\n            <option value=\"480\">8 часов</option>\r\n            <option value=\"1440\">24 часа</option>\r\n          </Select>\r\n\r\n          <Select\r\n            top=\"Получать информацию за крайние N, часов\"\r\n            name=\"updated\"\r\n            onChange={this.onChange}\r\n            defaultValue=\"60\"\r\n          >\r\n      <option value=\"60\">1 час</option>\r\n      {Number(interval) > 60 ? <option value=\"120\">2 часа</option> : null}\r\n      {Number(interval) > 60 ? <option value=\"180\">3 часа</option> : null}\r\n      {Number(interval) > 60 ? <option value=\"240\">4 часа</option> : null}\r\n      {Number(interval) > 240 ? <option value=\"240\">5 часов</option> : null}\r\n      {Number(interval) > 240 ? <option value=\"240\">6 часов</option> : null}\r\n      {Number(interval) > 240 ? <option value=\"240\">7 часов</option> : null}\r\n      {Number(interval) > 240 ? <option value=\"240\">8 часов</option> : null}\r\n      </Select>\r\n\r\n          <Select\r\n            top=\"Сколько дешевых авиабилетов показывать в сутки?\"\r\n            name=\"limit\"\r\n            defaultValue=\"0\"\r\n          >\r\n            <option value=\"0\">все</option>\r\n            <option value=\"20\">20</option>\r\n            <option value=\"50\">50</option>\r\n            <option value=\"100\">100</option>\r\n            <option value=\"300\">300</option>\r\n          </Select>\r\n          \r\n          <FormLayoutGroup top=\"Направление полетов\">\r\n            {(forward && dual) &&<SimpleCell after={<Switch name=\"all_flight\" style={checkbox} onChange={(e) => { this.onChangeCheck(e); this.setState({ forward: true, dual:true})}} checked={all_flight} />}>Любое</SimpleCell>}\r\n            {!all_flight && <SimpleCell after={<Switch name=\"forward\" onChange={this.onChangeCheck} checked={forward} />}>туда</SimpleCell>}\r\n            {!all_flight && <SimpleCell after={<Switch name=\"dual\" style={checkbox} onChange={this.onChangeCheck} checked={dual} />}>туда-обратно</SimpleCell>}\r\n          </FormLayoutGroup>\r\n          <Tabs mode=\"buttons\">\r\n            {datesCnt && (\r\n              datesCnt.map((item, i) => <TabsItem selected={activeCnt == i} onClick={() => this.setState({ activeCnt: i })}>{(i+1)+\" период\"}</TabsItem>)\r\n            )}\r\n            {datesCnt.length < 3 && <TabsItem onClick={this.addFrom}><Icon16Add /></TabsItem>}\r\n            {datesCnt.length > 1 && <TabsItem onClick={this.removeFrom} ><Icon16Cancel fill=\"rgb(255, 26, 0)\"/></TabsItem>}\r\n          </Tabs>\r\n          </FormLayout>\r\n                <FormLayout key={activeCnt}>\r\n                  <Select\r\n                    top={`Год вылета (${activeCnt+1})`}\r\n                    name=\"year\"\r\n                    id={activeCnt}\r\n                    onChange={this.onChangeFrom}\r\n                    value={datesCnt[activeCnt].year}\r\n                  >\r\n                    {\r\n                      Array.from(Array(31).keys()).map((year) => \r\n                        <option key={year} value={(new Date()).getFullYear()+year}>\r\n                          {(new Date()).getFullYear()+year}\r\n                        </option>\r\n                      )\r\n                    }\r\n                  </Select>\r\n                  <Select\r\n                    top={`Время года (${activeCnt+1})`}\r\n                    name=\"season\"\r\n                    id={activeCnt}\r\n                    onChange={this.onChangeFrom}\r\n                    value={datesCnt[activeCnt].season}\r\n                  >\r\n                    {\r\n                      Object.keys(SEASONS_TRANSCRIPTION).filter((e) => {\r\n                        let s = e;\r\n                        let m = new Date().getMonth()+1;\r\n                      if(new Date().getFullYear() == datesCnt[activeCnt].year) {\r\n                        if(s == 'all') \r\n                          return s;\r\n                        if(s == 'winter' && m <= 12)\r\n                          return s;\r\n                        if(s == 'spring' && m <= 5) \r\n                          return s;\r\n                        if(s == 'summer' && m <= 8) \r\n                          return s;\r\n                        if(s == 'fall' && m <= 11)\r\n                          return s;\r\n                      }else return e;\r\n                      }).map((season) => \r\n                        <option value={season} key={season}>\r\n                          {SEASONS_TRANSCRIPTION[season]}\r\n                        </option>\r\n                      )\r\n                    }\r\n                  </Select>     \r\n                 <Select\r\n                    top={`Месяц (${activeCnt+1})`}\r\n                    name=\"month\"\r\n                    id={activeCnt}\r\n                    onChange={this.onChangeFrom}\r\n                    value={datesCnt[activeCnt].month}\r\n                  >\r\n                    {\r\n                      Object.keys(MONTHS_TRANSCRIPTION).filter((n) => {\r\n                        if(n == 0) {\r\n                          return n;\r\n                        }\r\n                        let m = new Date().getMonth()+1;\r\n                       if(new Date().getFullYear() == datesCnt[activeCnt].year) { \r\n                        switch(datesCnt[activeCnt].season) {\r\n                          case 'all': \r\n                            return n;\r\n                          break;\r\n\r\n                          case 'winter':\r\n                            if((n == 12 && m <= n) || (n == 1 && m <= n) || (n == 2 && m <= n)) {\r\n                              return n;\r\n                            }\r\n                          break;  \r\n                          case 'summer':\r\n                            if((n == 6 && m <= n) || (n == 7 && m <= n) || (n == 8 && m <= n)) {\r\n                              return n;\r\n                            }\r\n                          break;  \r\n                          case 'fall':\r\n                            if((n == 9 && n >= m) || (n == 10 && n >= m) || (n == 11 && n >= m)) {\r\n                              return n;\r\n                            }\r\n                          break; \r\n\r\n                          case 'spring':\r\n                            if((n == 3 && n >= m) || (n == 4 && n >= m) || (n == 5 && n >= m)) {\r\n                              return n;\r\n                            }\r\n                          break;  \r\n                        }\r\n                      }else{\r\n                        switch(datesCnt[activeCnt].season) {\r\n                          case 'all': \r\n                            return n;\r\n                          break;\r\n\r\n                          case 'winter':\r\n                            if((n == 12 ) || (n == 1) || (n == 2)) {\r\n                              return n;\r\n                            }\r\n                          break;  \r\n                          case 'summer':\r\n                            if((n == 6 ) || (n == 7) || (n == 8)) {\r\n                              return n;\r\n                            }\r\n                          break;  \r\n                          case 'fall':\r\n                            if((n == 9) || (n == 10) || (n == 11)) {\r\n                              return n;\r\n                            }\r\n                          break; \r\n\r\n                          case 'spring':\r\n                            if((n == 3 ) || (n == 4 ) || (n == 5)) {\r\n                              return n;\r\n                            }\r\n                          break;  \r\n                        }\r\n                      }\r\n                      }).map((month) => \r\n                        <option value={month} key={month}>\r\n                          {MONTHS_TRANSCRIPTION[month]}\r\n                        </option>\r\n                      )\r\n                    }\r\n                  </Select>\r\n                  </FormLayout>\r\n              <FormLayout>    \r\n              <Separator />\r\n          <Select\r\n            top=\"Пассажиры\"\r\n            name=\"passengers\"\r\n            onChange={this.onChange}\r\n          >\r\n            {\r\n              Object.keys(PASSENGERS).map((passengers) => \r\n                <option value={passengers} key={passengers}>\r\n                  {PASSENGERS[passengers]}\r\n                </option>\r\n              )\r\n            }\r\n          </Select>\r\n          <Select\r\n            top=\"Язык\"\r\n            name=\"language\"\r\n            onChange={this.onChange}\r\n            value={language}\r\n          >\r\n            {\r\n              Object.keys(LANGUAGES).map((language) => \r\n                <option value={language} key={language}>\r\n                  {LANGUAGES[language]}\r\n                </option>\r\n              )\r\n            }\r\n          </Select>\r\n          <Select\r\n            top=\"Валюта в билете\"\r\n            name=\"currency\"\r\n            onChange={(e) => {this.onChange(e); this.setState({randomCost:true, costMin:CURRENCY[e.currentTarget.value].min, costMax:CURRENCY[e.currentTarget.value].max})}}\r\n            value={currency}\r\n          >\r\n            {\r\n              Object.keys(CURRENCY).map((currency) => \r\n                <option value={currency} key={currency}>\r\n                  {CURRENCY[currency].name}\r\n                </option>\r\n              )\r\n            }\r\n          </Select>\r\n          <Select\r\n            top=\"Валюта покупки\"\r\n            name=\"currencyForUrl\"\r\n            onChange={this.onChange}\r\n            value={currencyForUrl}\r\n          >\r\n            {\r\n              Object.keys(CURRENCY).map((currency) => \r\n                <option value={currency} key={currency}>\r\n                  {CURRENCY[currency].name}\r\n                </option>\r\n              )\r\n            }\r\n          </Select>\r\n\r\n          <FormLayoutGroup top={\"Выберите минимальную и максимальную стоимость авиабилетов, \" + currency}>\r\n          \r\n\r\n           <SimpleCell after={\r\n                       <Switch\r\n                       checked={randomCost}\r\n                       onChange={(e) => {\r\n                         this.setState({\r\n                           costMin: e.currentTarget.checked ? CURRENCY[currency].min : costMin,\r\n                           costMax: e.currentTarget.checked ? CURRENCY[currency].max : costMax,\r\n                           randomCost: e.currentTarget.checked\r\n                         })\r\n                       }}\r\n                     />\r\n           }>любая</SimpleCell>\r\n            \r\n           {!randomCost &&\r\n          <RangeSlider\r\n            top={costMin + \" - \" + costMax}\r\n            min={CURRENCY[currency].min}\r\n            max={CURRENCY[currency].max}\r\n            step={100}\r\n            defaultValue={[CURRENCY[currency].min, CURRENCY[currency].max]}\r\n            value={[costMin, costMax]}\r\n            onChange={(value) => {\r\n              this.setState({\r\n                costMin: value[0],\r\n                costMax: value[1],\r\n                randomCost: false\r\n              })\r\n            }}\r\n          />\r\n          }\r\n          {!randomCost &&\r\n          <div style={{ display: 'flex' }}>\r\n            <Input\r\n              onFocus={() => {\r\n                console.log('focus')\r\n              }}\r\n              value={costMin}\r\n              type=\"number\"\r\n              onChange={(e) => {\r\n                const value = parseInt(e.currentTarget.value, 10)\r\n                if(value){\r\n                  if(value < costMax && value >= CURRENCY[currency].min){\r\n                    this.setState({ costMin: value })\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n            <Input\r\n              value={costMax}\r\n              type=\"number\"\r\n              onChange={(e) => {\r\n                const value = parseInt(e.currentTarget.value, 10)\r\n                if(value){\r\n                  if(value > costMin && value <= CURRENCY[currency].max){\r\n                    this.setState({ costMax: value })\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n  }\r\n          </FormLayoutGroup> \r\n          <Select name='profitability' onChange={this.onChange} top=\"Показывать авиабилеты только с выгодой больше, %\">\r\n            <option>30</option>\r\n            <option>40</option>\r\n            <option>50</option>\r\n            <option>60</option>\r\n            <option>70</option>\r\n            <option>80</option>\r\n            <option>90</option>\r\n          </Select>\r\n          <FormLayoutGroup top=\"Хочу вылететь в определенный день недели\">\r\n              <SimpleCell after={<Switch checked={this.state.allDays} name='all' onChange={this.onChangeDays} />}>любой</SimpleCell>\r\n              {!this.state.allDays &&\r\n              <div>\r\n                <SimpleCell after={<Switch name='0' onChange={this.onChangeDays} checked={days[0] || this.state.allDays} />}>понедельник</SimpleCell>\r\n                <SimpleCell after={<Switch name='1' onChange={this.onChangeDays} checked={days[1] || this.state.allDays} />}>вторник</SimpleCell>\r\n                <SimpleCell after={<Switch name='2' onChange={this.onChangeDays} checked={days[2] || this.state.allDays} />}>среда</SimpleCell>\r\n                <SimpleCell after={<Switch name='3' onChange={this.onChangeDays} checked={days[3] || this.state.allDays} />}>четверг</SimpleCell>\r\n                <SimpleCell after={<Switch name='4' onChange={this.onChangeDays} checked={days[4] || this.state.allDays} />}>пятница</SimpleCell>\r\n                <SimpleCell after={<Switch name='5' onChange={this.onChangeDays} checked={days[5] || this.state.allDays} />}>суббота</SimpleCell>\r\n                <SimpleCell after={<Switch name='6' onChange={this.onChangeDays} checked={days[6] || this.state.allDays} />}>воскресенье</SimpleCell>\r\n                \r\n              \r\n              \r\n              \r\n              \r\n              \r\n              \r\n              </div>\r\n              }\r\n          </FormLayoutGroup>  \r\n          <FormLayoutGroup top=\"Температура воздуха днем в день прилета, C\">\r\n              <SimpleCell after={          \r\n          <Switch\r\n            checked={randomTempDay}\r\n            onChange={(e) => {\r\n              this.setState({\r\n                dayTempMin: e.currentTarget.checked ? -50 : dayTempMin,\r\n                dayTempMax: e.currentTarget.checked ?  50 : dayTempMax,\r\n                randomTempDay: e.currentTarget.checked\r\n              })\r\n            }}\r\n          />}>\r\n                любая\r\n              </SimpleCell>\r\n\r\n            \r\n         {!randomTempDay &&\r\n          <RangeSlider\r\n            min={-50}\r\n            max={50}\r\n            step={1}\r\n            defaultValue={[-50, 50]}\r\n            value={[dayTempMin, dayTempMax]}\r\n            onChange={(value) => {\r\n              this.setState({\r\n                dayTempMin: value[0],\r\n                dayTempMax: value[1],\r\n                randomTempDay: false\r\n              })\r\n            }}\r\n          />\r\n          }\r\n          {!randomTempDay &&\r\n          <div style={{ display: 'flex' }}>\r\n            <Input\r\n              onFocus={() => {\r\n                console.log('focus')\r\n              }}\r\n              value={dayTempMin}\r\n              type=\"number\"\r\n              onChange={(e) => {\r\n                const value = parseInt(e.currentTarget.value, 10)\r\n                if(value){\r\n                  if(value < dayTempMax && value >= -50){\r\n                    this.setState({ dayTempMin: value })\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n            <Input\r\n              value={dayTempMax}\r\n              type=\"number\"\r\n              onChange={(e) => {\r\n                const value = parseInt(e.currentTarget.value, 10)\r\n                if(value){\r\n                  if(value > dayTempMin && value <= 50){\r\n                    this.setState({ dayTempMax: value })\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          }     \r\n          </FormLayoutGroup>\r\n          \r\n          <FormLayoutGroup top=\"Температура воздуха ночью в день прилета, C\">     \r\n            <SimpleCell after={\r\n                         <Switch\r\n                         checked={randomTempNight}\r\n                         onChange={(e) => {\r\n                           this.setState({\r\n                             nighTempMin: e.currentTarget.checked ? -50 : nighTempMin,\r\n                             nighTempMax: e.currentTarget.checked ?  50 : nighTempMax,\r\n                             randomTempNight: e.currentTarget.checked\r\n                           })\r\n                         }}\r\n                       />\r\n            }>любая</SimpleCell>    \r\n\r\n          {!randomTempNight &&\r\n          <RangeSlider\r\n            min={-50}\r\n            max={50}\r\n            step={1}\r\n            defaultValue={[-50, 50]}\r\n            value={[nighTempMin, nighTempMax]}\r\n            onChange={(value) => {\r\n              this.setState({\r\n                nighTempMin: value[0],\r\n                nighTempMax: value[1],\r\n                randomTempNight: false\r\n              })\r\n            }}\r\n          />\r\n          }\r\n          {!randomTempNight && \r\n           <div style={{ display: 'flex' }}>\r\n            <Input\r\n              onFocus={() => {\r\n                console.log('focus')\r\n              }}\r\n              value={nighTempMin}\r\n              type=\"number\"\r\n              onChange={(e) => {\r\n                const value = parseInt(e.currentTarget.value, 10)\r\n                if(value){\r\n                  if(value < nighTempMin && value >= -50){\r\n                    this.setState({ nighTempMin: value })\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n            <Input\r\n              value={nighTempMax}\r\n              type=\"number\"\r\n              onChange={(e) => {\r\n                const value = parseInt(e.currentTarget.value, 10)\r\n                if(value){\r\n                  if(value > nighTempMax && value <= 50){\r\n                    this.setState({ nighTempMax: value })\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n            }\r\n          </FormLayoutGroup>\r\n          <Button mode='primary' size='xl' onClick={this.sort_res}>Подписаться</Button>\r\n          <Button style={{ border: '1px solid var(--accent)'}} href='https://www.booking.com/?aid=1540284' size='xl' target='_blank' mode='secondary'>Выбрать отель на booking.com</Button>\r\n        </FormLayout>\r\n        {this.state.snackbar}\r\n      </Panel>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EditSettings \r\n","import React, { Component } from 'react'\r\nimport { Panel, PanelHeader, PanelHeaderBack, Div, Input, List, SimpleCell, Placeholder } from '@vkontakte/vkui'\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\n\r\nexport class ChooseCity extends Component {\r\n  state = {\r\n    inp: this.props.default,\r\n    list:null\r\n  }\r\n\r\n  onChange = (e) => {\r\n    let country = \"\";\r\n    if(this.props.changeDefaultName == 'citySrc') \r\n        country = this.props.state.countrySrc;\r\n    if(this.props.changeDefaultName == 'cityDst') \r\n        country = this.props.state.countryDst;\r\n    if(this.props.changeDefaultName == 'city_')\r\n        country = this.props.state.user.country.title;\r\n    console.log(this.props.state);        \r\n    fetch(`https://autocomplete.travelpayouts.com/places2?term=${country} ${\r\n      e.currentTarget.value\r\n    }&locale=ru&types[]=city`)\r\n    .then(response => response.json())\r\n    .then(list => {\r\n      if(list.length > 0){\r\n        var resArr = [];\r\n        list.forEach(function(item){\r\n          if(item.country_name === country){\r\n            resArr.push(item);\r\n          }\r\n        });\r\n        this.setState({\r\n          list: resArr\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  onChoose = (name) => {\r\n    this.props.changeFunction(name);\r\n    this.props.back()\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      list\r\n    } = this.state\r\n    const {\r\n      id,\r\n      back,\r\n      text\r\n    } = this.props\r\n    return (\r\n      <Panel id={id}>\r\n        <PanelHeader\r\n          left={\r\n            <PanelHeaderBack onClick={back} />\r\n          }\r\n        >{text}</PanelHeader>\r\n        <Div>\r\n          <Input\r\n            onChange={this.onChange}\r\n          />\r\n        </Div>\r\n        {list === null ? \r\n        <Placeholder>Начните вводить название города</Placeholder>:\r\n        <List>\r\n          {\r\n            list && list.map((item, i) => \r\n              <SimpleCell\r\n                onClick={() => this.onChoose(item.name)}\r\n                id={item.name}\r\n                key={i}\r\n                after={\r\n                  item.name === text && (\r\n                    <Icon24Done />\r\n                  )\r\n                }\r\n              >\r\n                {item.name}\r\n              </SimpleCell>\r\n            )\r\n          }\r\n        </List>\r\n      }\r\n      </Panel>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ChooseCity\r\n","import React, { Component } from 'react'\nimport { Panel, PanelHeader, PanelHeaderBack, Div, Input, List, SimpleCell, Placeholder } from '@vkontakte/vkui'\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\n\nexport class ChooseCountry extends Component {\n  state = {\n    inp: this.props.default,\n    list:null\n  }\n\n  onChange = (e) => {\n    fetch(`https://autocomplete.travelpayouts.com/places2?term=${\n      e.currentTarget.value\n    }&locale=ru`)\n    .then(response => response.json())\n    .then(list => {\n      if(list.length > 0){\n        var resArr = [];\n        list.forEach(function(item){\n          var i = resArr.findIndex(x => x.country_name === item.country_name);\n          if(i <= -1){\n            resArr.push(item);\n          }\n        });\n        this.setState({\n          list: resArr\n        })\n      }\n    })\n  }\n\n  onChoose = (country_name) => {\n    this.props.changeFunction(country_name);\n    this.props.back()\n  }\n\n  render() {\n    const {\n      list\n    } = this.state\n    const {\n      id,\n      back,\n      text\n    } = this.props\n    return (\n      <Panel id={id}>\n        <PanelHeader\n          left={\n            <PanelHeaderBack onClick={back} />\n          }\n        >{text}</PanelHeader>\n        <Div>\n          <Input\n            onChange={this.onChange}\n          />\n        </Div>\n        {list === null ? \n        <Placeholder>Начните вводить название страны</Placeholder>\n        :\n        <List>\n          {\n            list && list.map((item, i) => \n              <SimpleCell\n                onClick={() => this.onChoose(item.country_name)}\n                id={item.country_name}\n                key={i}\n                after={\n                  item.country_name === text && (\n                    <Icon24Done />\n                  )\n                }\n              >\n                {item.country_name}\n              </SimpleCell>\n            )\n          }\n        </List>\n       }\n      </Panel>\n    )\n  }\n}\n\nexport default ChooseCountry\n","import React, { Component } from 'react'\r\nimport { Panel, PanelHeader, PanelHeaderBack, Div, Input, List, SimpleCell, Placeholder } from '@vkontakte/vkui'\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\n\r\nexport class ChooseCountryByContinentp extends Component {\r\n  state = {\r\n    inp: this.props.default,\r\n    list:null\r\n  }\r\n\r\n  onChange = (e) => {\r\n    const search = e.currentTarget.value.toLowerCase();\r\n    fetch(`https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/countries/byContinent/${\r\n      this.props.state.continentDst\r\n    }`)\r\n    .then(response => response.json())\r\n    .then(list => {\r\n\r\n        let arr = list.map((item) => { return item.nameTranslations.ru});\r\n        let resArr = arr.filter((name) => name.toLowerCase().indexOf(search) > -1);\r\n        console.log(resArr);\r\n        this.setState({\r\n          list: resArr\r\n        })\r\n      }\r\n    )\r\n  }\r\n\r\n  onChoose = (country_name) => {\r\n    this.props.changeFunction(country_name);\r\n    this.props.back()\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      list\r\n    } = this.state\r\n    const {\r\n      id,\r\n      back,\r\n      text\r\n    } = this.props\r\n    return (\r\n      <Panel id={id}>\r\n        <PanelHeader\r\n          left={\r\n            <PanelHeaderBack onClick={back} />\r\n          }\r\n        >{text}</PanelHeader>\r\n        <Div>\r\n          <Input\r\n            onChange={this.onChange}\r\n          />\r\n        </Div>\r\n        {list === null ? \r\n        <Placeholder>Начните вводить название страны</Placeholder>\r\n        :\r\n        <List>\r\n          {\r\n            list && list.map((item, i) => \r\n              <SimpleCell\r\n                onClick={() => this.onChoose(item)}\r\n                id={item}\r\n                key={i}\r\n                after={\r\n                    item === text && (\r\n                    <Icon24Done />\r\n                  )\r\n                }\r\n              >\r\n                {item}\r\n              </SimpleCell>\r\n            )\r\n          }\r\n        </List>\r\n       }\r\n      </Panel>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ChooseCountryByContinentp;\r\n","import React from 'react'\nimport { Epic, Tabbar, TabbarItem, View, Panel, ModalRoot, ModalPage,  Div, Checkbox, Title, FormLayout, Switch, Cell, ScreenSpinner, Button, ModalPageHeader, Card, ConfigProvider, Spinner, Avatar, InfoRow, FormStatus, SimpleCell, IS_PLATFORM_IOS , IS_PLATFORM_ANDROID , PanelHeaderButton } from '@vkontakte/vkui'\nimport bridge from '@vkontakte/vk-bridge'\nimport axios from 'axios';\n\n\n\n// icons\nimport Icon28Users3Outline from '@vkontakte/icons/dist/28/users_3_outline';\nimport Icon28Settings from '@vkontakte/icons/dist/28/settings';\nimport Icon28HomeOutline from '@vkontakte/icons/dist/28/home_outline';\nimport Icon28Users from '@vkontakte/icons/dist/28/users';\nimport Icon28Send from '@vkontakte/icons/dist/28/send';\nimport Icon28HelpOutline from '@vkontakte/icons/dist/28/help_outline';\nimport Icon28ServicesOutline from '@vkontakte/icons/dist/28/services_outline';\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\n\n\n// panels\nimport Groups from './panels/Groups'\nimport GroupInfo from './panels/GroupInfo';\nimport Catalog from './panels/Catalog'\nimport SectionCatalog from './panels/SectionCatalog'\nimport MySubs from './panels/MySubs'\nimport Friends from './panels/Friends'\nimport Settings from './panels/Settings'\nimport EditSettings from './panels/EditSettings';\nimport ChooseCountry from './components/ChooseCountry';\nimport ChooseCity from './components/ChooseCity';\nimport ChooseCountryByContinent from './components/ChooseCountryByContinent';\nimport SnackbarError from './components/SnackbarError';\n\nconst blue = {\n  color:'var(--accent)'\n}\n\nconst SEASONS_TRANSCRIPTION = {\n  'all': 'любое',\n  'winter': 'зима',\n  'spring': 'весна',\n  'summer': 'лето',\n  'fall': 'осень',\n};\nconst MONTHS_TRANSCRIPTION = {\n  0: 'любой',\n  1: 'январь', 2: 'февраль', 3: 'март', 4: 'апрель',\n  5: 'май', 6: 'июнь', 7: 'июль', 8: 'август',\n  9: 'сентябрь', 10: 'октябрь', 11: 'ноябрь', 12: 'декабрь',\n};\n\nconst CONTINENTS = {\n  'random': 'любая',\n  'E': 'Европа',\n  'F': 'Африка',\n  'O': 'Океания',\n  'A': 'Азия',\n  'S': 'Южная Америка',\n  'N': 'Северная Америка',\n};\n\nconst PASSENGERS = {\n  url: \"1 пассажир, экономкласс\",\n  url1Business: \"1 пассажир, бизнес-класс\",\n  url2Passengers: \"2 пассажира, экономкласс\",\n  urlForma: \"открытая редактируемая форма поиска\"\n}\n\nconst CURRENCY = {\n  AZN: \"манат\",\n  BYN: \"беларусский рубль\",\n  CNY: \"юань\",\n  EUR: \"евро\",\n  KGS: \"сом\",\n  KZT: \"тенге \",\n  RUB: \"рубль \",\n  THB: \"бат\",\n  UAH: \"гривна\",\n  USD: \"доллар\",\n  UZS: \"сум\"\n}\n\nconst CURRENCY1 = {\n  AZN: \"манат\",\n  BYN: \"беларусских рублей\",\n  CNY: \"юань\",\n  EUR: \"евро\",\n  KGS: \"сом\",\n  KZT: \"тенге \",\n  RUB: \"рублей\",\n  THB: \"бат\",\n  UAH: \"гривна\",\n  USD: \"доллар\",\n  UZS: \"сум\"\n}\n\nconst LANGUAGES = {\n  de: \"немецкий\",\n  en: \"английский\",\n  es: \"испанский\",\n  fr: \"французский\",\n  it: \"итальянский\",\n  ru: \"русский\",\n  th: \"тайский\",\n  tr: \"турецкий\"\n}\n\n\nclass App extends React.Component {\n  state = {\n    activeStory: 'about',\n    activePanel: 'home',\n    activeModal: null,\n    popout: null,\n    currentCatalog: 0,\n    currentGroup:\"\",\n    catalog:null,\n    appId: null,\n    marker:122890,\n\n    activeTab: 'groups',\n    countGroups:null,\n    countDB:null,\n    groups:null,\n    DB:null,\n\n    form:null, //state для проброса значений из редактора подписки(база данных)\n    obj:{\n      from:[],\n      to:[],\n      all:false\n    } , //state для проброса значений из создания и редоктирования подписки база данных\n\n  }\n\n  componentDidMount() {\n    // Получаем данные о пользователе и каналы\n    \n    this.setPopout(<ScreenSpinner />)\n    bridge.sendPromise(\"VKWebAppGetUserInfo\")\n    .then(user => {\n        this.setState({\n          activeStory:'subscribes',\n          appId: parseInt(window.location.href.split(\"vk_app_id=\")[1].split(\"&\")[0], 10),\n          user,\n          platform:this.props.platform\n        })\n        this.setPopout(null)\n       }\n      )\n\n      axios.get(\"https://cors-anywhere.herokuapp.com/https://api.cheapflights.sale/api/Channels\")\n      .then(async data => {\n        await this.sortData(data.data)\n      })\n\n    \n  }\n\n  // Приведение каналов в адекватный вид:\n  // [\n  //   {\n  //     catalog: \"catalog name\",\n  //     to: [\n  //       \"country\",\n  //       {\n  //         \"section\": \"в европу\",\n  //         arr: [\n  //           \"country\"\n  //         ]\n  //       }\n  //     ]\n  //   }\n  // ]\n  sortData = async data => {\n    const catalog = []\n    data.forEach(async item => {\n      let index = catalog.findIndex(a => a.catalog === item.catalog)\n      if(index === -1){\n        catalog.push({\n          catalog: item.catalog,\n          to: []\n        })\n        index = catalog.length-1\n      }\n      if(item.section){\n        const sectionIndex = catalog[index].to.findIndex(a => a.section === item.section)\n        if(sectionIndex === -1){\n          catalog[index].to.push({\n            section: item.section,\n            arr: [item]\n          })\n        }else{\n          catalog[index].to[sectionIndex].arr.push(item)\n        }\n      }else{\n        catalog[index].to.push(item)\n      }\n    })\n    catalog.shift()\n    catalog.splice(catalog.findIndex(a => a.catalog === \"\"),1)\n    this.setState({ catalog })\n  }\n  \n  // Смена табов\n  onStoryChange = (e) => {\n    this.setState({ activeStory: e.currentTarget.dataset.story, activePanel: 'home' })\n  }\n\n  // Рисование попаута\n  setPopout = popout => {\n    this.setState({ popout })\n  }\n\n  // Открытие той или иной части света\n  openCatalog = e => {\n    this.setState({ \n      activePanel: 'catalog',\n      currentCatalog: parseInt(e.currentTarget.id, 10),\n    })\n  }\n  //открытие модалки\n  openModal = modal => {\n    console.log(modal);\n    this.setState({activeModal: modal});\n  }\n\n  chooseGlobal = ( data) => {\n    console.log(this.state.changeDefaultName, data);\n    this.setState({[this.state.changeDefaultName]: data});\n  }\n\n  // Изменение панели\n  go = activePanel => {\n    this.setState({ activePanel, currentSection: null })\n  }\n\n  // Открыть секцию\n  chooseSection = e => {\n    this.setState({ activePanel: \"sectionCatalog\", currentSection: parseInt(e.currentTarget.id, 10) })\n  }\n\n  save_request = () => {  //сохранение подписки\n    this.setState({ popout: <ScreenSpinner /> });\n    fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/save-user-api-request\", {\n      \"headers\": {\n        \"accept\": \"*/*\",\n        \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n        \"content-type\": \"application/json;charset=utf-8\",\n      },\n      \"referrer\": \"https://appvk.flights.ru/\",\n      \"referrerPolicy\": \"no-referrer-when-downgrade\",\n      \"body\": JSON.stringify(this.state.item),\n      \"method\": \"POST\",\n    })\n    .then(response => response.json())\n    .then(check => {\n      if(check.response === 'ok'){\n        this.setState({ popout: null, activeModal: null, activePanel:'home'});\n        console.log(check);\n      }\n    }).catch(err => {\n        this.setState({snackbar:<SnackbarError close={() => this.setState({snackbar:null})} />})\n        this.setState({ popout: null });\n    })\n  }\n  \n  //редактирование state(Дял формы редактирования и создания подписки на сообщества)\n  onChangeGroups = (name, obj) => {\n    console.log(obj)\n   this.setState({ [name]: obj });\n  }\n\n\n  choose = e => {\n    this.setState({\n      obj:{ ...this.state.obj,\n      [e.currentTarget.name]: this.state.obj[e.currentTarget.name].map((item, i) => {\n        if(i === parseInt(e.currentTarget.id, 10)){\n          item.checked = e.currentTarget.checked\n          return item\n        }else{\n          return item\n        }\n      })\n    }\n    })\n    let bool = true;\n    this.state.obj.from.forEach(element => {\n      if(!element.checked) {\n        bool = false;\n      }\n    });\n    this.state.obj.to.forEach(element => {\n      if(!element.checked) {\n        bool = false;\n      }\n    })\n    this.setState({ obj:{ ...this.state.obj,all:bool }})\n  }\n\n  goGroup = (item) => {\n    this.setState({ currentGroup: item, activePanel:'group'});\n  }\n\n  chooseAll = () => {\n    let bool = !this.state.obj.all;\n    const { from , to} = this.state.obj;\n    this.setState({\n      obj: {\n      ...this.state.obj,\n      from: from.map((item, i) => {  \n          item.checked = bool;\n          return item\n      }),\n      to: to.map((item, i) => {  \n        item.checked = bool;\n        return item\n    }), all:bool\n  }\n    })\n  }\n\n  // сохранение подписки(настройка)\n  submit = async () => {\n    const { from, to, name, groupId, screenName } = this.state.obj;\n    const { catalog, currentCatalog, currentSection, user} = this.state;\n    this.setPopout(<ScreenSpinner />);\n    if(from.filter((item) => item.checked).length > 0 && \n      to.filter((item) => item.checked).length > 0\n    ){\n      let arr = []\n      arr = arr.concat(from.filter((item) => item.checked)\n      .map((item) => item.tag+\"/\"+groupId+\"/\"+name+\"/\"+catalog[currentCatalog].catalog+\"/\"+(currentSection ? currentSection : \"Любой\")))\n      arr = arr.concat(to.filter((item) => item.checked)\n      .map((item) => item.tag+\"/\"+groupId+\"/\"+name+\"/\"+catalog[currentCatalog].catalog+\"/\"+(currentSection ? currentSection : \"Любой\")))\n\n      fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/get-tags\", {\n        \"headers\": {\n          \"accept\": \"*/*\",\n          \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n          \"content-type\": \"application/json;charset=utf-8\",\n        },\n        \"body\": JSON.stringify({\n          user_id: String(user.id)\n        }),\n        \"method\": \"POST\",\n      })\n      .then(response => response.json())\n      .then(data => {\n        if(data.tags.length > 0){\n          arr = arr.concat(\n            data.tags.map((item) => \n              item.body+\"/\"+item.group_id+\"/\"+item.group_name+\"/\"+item.category+\"/\"+item.section\n            )\n          )\n        }\n        fetch(\"https://cors-anywhere.herokuapp.com/https://appvk.flights.ru/save-tags\", {\n          \"headers\": {\n            \"accept\": \"*/*\",\n            \"accept-language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\",\n            \"content-type\": \"application/json;charset=utf-8\",\n          },\n          \"referrer\": \"https://appvk.flights.ru/\",\n          \"referrerPolicy\": \"no-referrer-when-downgrade\",\n          \"body\": JSON.stringify({\n            user_id: String(user.id),\n            checkbox: arr\n          }),\n          \"method\": \"POST\",\n        })\n        .then(response => response.json())\n        .then(check => {\n          if(check.response === 'ok'){\n            let arr = this.state.my_groups.push(screenName)\n            console.log(this.state.my_groups);\n            this.setState({ popout: null, activeModal: null});\n          }\n        })\n      })\n    }\n  }\n\n  render () {\n    const {\n      activePanel,\n      popout,\n      defaultCountry,\n      chooseCountryText,\n      changeFunction,\n      changeDefaultName,\n      friend,\n      calendar,\n      item\n    } = this.state\n    const {\n      from,\n      to,\n      all\n    } = this.state.obj;\n    return (\n      <ConfigProvider isWebView={true}>\n      <Epic activeStory={this.state.activeStory}  tabbar={\n        <Tabbar>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'about'}\n            data-story=\"about\"\n            text=\"Помощь\"\n          ><Icon28HelpOutline /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'subscribes'}\n            data-story=\"subscribes\"\n            text=\"Подписки\"\n          ><Icon28HomeOutline /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'friends'}\n            data-story=\"friends\"\n            text=\"Друзья\"\n          ><Icon28Users /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'aviasales'}\n            data-story=\"aviasales\"\n            text=\"Билет\"\n          ><Icon28Send /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'services'}\n            data-story=\"services\"\n            text=\"Сервисы\"\n          ><Icon28ServicesOutline /></TabbarItem>\n        </Tabbar>\n      }>\n\n        <View id='about' activePanel={activePanel} popout={popout}>\n          <Panel id='home'>\n  \n          </Panel>\n        </View>\n\n        <View id=\"subscribes\" activePanel={activePanel} popout={popout} modal={\n        <ModalRoot activeModal={this.state.activeModal}>\n          <ModalPage id='subscribeCities' onClose={() => this.setState({ activeModal:null, obj:{to:[], from:[], all:false}} )} dynamicContentHeight settlingHeight={100} header={<ModalPageHeader noShadow><div align='center' className=\"Header__Modal\" /></ModalPageHeader>}>\n          <div style={{ position: \"relative\", textAlign: \"left\", overflowX: \"hidden\", overflowY: \"auto\", backgroundColor:'#fff' }} className=\"SubscribeCities\">\n          <Cell indicator={<Switch checked={all || (!all && from.findIndex(t => t.checked == false) == -1 && to.findIndex(t => t.checked == false) == -1)} onChange={this.chooseAll}/>}>Показывать все</Cell>\n          <Div style={{ paddingTop: 0 }}>\n          <Title level=\"3\" weight=\"bold\" style={{ paddingBottom: '11px', paddingTop: 11}}>Показывать авиабилеты из</Title>\n            {\n              from && (\n                from.map((item, index) => \n                  <SimpleCell style={{ padding: 0}} after={                  \n                  <Switch\n                    key={index}\n                    id={index}\n                    name=\"from\"\n                    onChange={this.choose}\n                    checked={item.checked}\n\n                  />}>\n                    {item.tag.split(\"#\")[1].split(\"@\")[0]}\n                  </SimpleCell>         \n                )\n              )\n            }\n            <Title level=\"3\" weight=\"bold\" style={{ padding: '11px 0'}}>Показывать авиабилеты в</Title>\n            {\n              to && (\n                to.map((item, index) => \n                <SimpleCell style={{ padding: 0}} after={                  \n                  <Switch\n                    key={index}\n                    id={index}\n                    name=\"to\"\n                    onChange={this.choose}\n                    checked={item.checked}\n\n                  />}>\n                    {item.tag.split(\"#\")[1].split(\"@\")[0]}\n                  </SimpleCell>   \n                )\n              )\n            } \n          </Div>\n          <Div style={{ paddingTop:8}}>\n          <Button size='xl' onClick={this.submit} disabled={from.findIndex(t => t.checked == true) === -1 && to.findIndex(t => t.checked == true) == -1}>Применить</Button>\n          </Div>\n        </div>\n          </ModalPage>\n          <ModalPage id='confirm_settings' header={<ModalPageHeader>Подтверждение</ModalPageHeader>} onClose={() => this.setState({ activeModal: null})} settlingHeight={100}>\n              {item && \n              <Card size=\"l\" mode=\"shadow\">\n                  <Div style={{ padding: '20px', lineHeight: 1.5 }}>\n                    Из страны <b style={blue}>{\n                    (item.output).countrySrc ? (item.output).countrySrc : \"любая\"\n                    }</b> и города <b style={blue}>{(item.output).citySrc ? (item.output).citySrc : \"любой\"}</b><br />\n                    В часть света <b style={blue}>{CONTINENTS[(item.output).continentDst]}</b> и страну <b  style={blue}>{(item.output).countryDst ? (item.output).countryDst : \"любая\"}</b><br />\n                    В город <b  style={blue}>{(item.output).cityDst ? (item.output).cityDst : \"любой\"}</b><br />\n                    {\n                      (item.output).dates.map((item, i) => \n                        <div key={i}>\n                          <div style={{ color: 'var(--tabbar_inactive_icon)' }}>Период вылета({i+1})</div>\n                          год <b  style={blue}>{item.year}</b><br />\n                          время года <b  style={blue}>{SEASONS_TRANSCRIPTION[item.season]}</b><br />\n                          месяц <b  style={blue}>{MONTHS_TRANSCRIPTION[item.month]}</b><br />\n                        </div>    \n                      )\n                    }<br />\n                    Направление полетов: туда-обратно - <b  style={blue}>{(item.output).dual ? \"да\" : \"нет\"}</b><br />\n                    Направление полетов: туда - <b  style={blue}>{(item.output).forward ? \"да\" : \"нет\"}</b><br />\n                    Пассажиры <b style={blue}>{PASSENGERS[(item.output).passengers]}</b><br />\n                    Цена от <b style={blue}>{(item.output).costMin}</b> до <b style={blue}>{(item.output).costMax}</b> {CURRENCY1[(item.output).currency]}<br />\n\n                    Период показа <b style={blue}>{(item.output).interval}</b> минут<br />\n                    Глубина поиска <b style={blue}>{(item.output).updated}</b> минут<br />\n                    Максимальное количество билетов за 24 часа <b style={blue}>{(item.output).limit === \"0\" ? \"все\" : (item.output).limit}</b><br />\n                    Язык <b style={blue}>{LANGUAGES[(item.output).language]}</b><br />\n                    Валюта (цена) <b style={blue}>{CURRENCY[(item.output).currency]}</b><br />\n                    Валюта (метапоисковика) <b style={blue}>{CURRENCY[(item.output).currencyForUrl]}</b><br />\n                    {\n                      (item.output).optional && (\n                        <div><br />\n                          <div style={{ color: 'var(--tabbar_inactive_icon)' }}>Дополнительные параметры</div>\n                          {\n                            (item.output).profitability && (\"Выгодность покупки больше \")\n                          }\n                          {\n                            (item.output).profitability && \n                            <b style={blue}>{(item.output).profitability+\"%\"}</b>\n                          }<br />\n                          Дни недели вылета <b style={blue}>{\n                            ((days) => {\n                              const daysOfWeek = [\n                                \"вс\",\n                                \"пн\",\n                                \"вт\",\n                                \"ср\",\n                                \"чт\",\n                                \"пт\",\n                                \"сб\"\n                              ]\n                              let check = 0;\n                              days.every((element, index, array) => {\n                                  check++;\n                                  return element === true;\n                              });\n                              if (check === 7) {\n                                  return 'все';\n                              }\n                              let res = '';\n                              for (let index = 1; index < days.length; index++) {\n                                  if (days[index]) {\n                                      res += daysOfWeek[index].toLowerCase() + ', ';\n                                  }\n                              }\n                              res += daysOfWeek[0].toLowerCase();\n                              return res;\n                            })((item.output).days)\n                          }</b><br />\n                          {\n                            (item.output).showAddionalWeather && (\n                              <div>\n                                Прогноз погоды в день прилета<br />\n                                Днем от <b style={blue}>{(item.output)['dayTemp.min']}</b> С до <b style={blue}>{(item.output)['dayTemp.max']}</b> С<br />\n                                Ночью от <b style={blue}>{(item.output)['nightTemp.min']}</b> С до <b style={blue}>{(item.output)['nightTemp.max']}</b> С<br />\n                              </div>\n                            )\n                          }\n                        </div>\n                      )\n                    }\n                  </Div>\n                    <Div>\n                      <Button size='xl' onClick={this.save_request}>Подписаться</Button>  \n                    </Div>\n\n                    <Div>\n                      <Button style={{ border: '1px solid var(--accent)'}} mode='secondary' size='xl' onClick={() => this.setState({activeModal:null})}>Редактировать</Button>\n                    </Div>\n                          \n                </Card>\n              }\n            </ModalPage>\n        </ModalRoot>\n      }>\n          <MySubs\n            id=\"home\"\n            state={this.state}\n            go={this.go}\n            onChangeGroups={this.onChangeGroups}\n            onChange={this.onChangeForm}\n            changeFunction={this.chooseGlobal}\n            changeDefaultName={(changeDefaultName) => this.setState({ changeDefaultName }, console.log(changeDefaultName))}\n            openModal={this.openModal}\n            onChangeGroups={this.onChangeGroups}\n            setPopout={this.setPopout}\n          />\n\n          <Settings\n            id=\"settings\"\n            state={this.state}\n            setPopout={this.setPopout}\n            onChangeGroups={this.onChangeGroups}\n            openModal={this.openModal}\n            go={this.go}\n          />\n\n          <EditSettings \n            id='edit_settings'\n            onChangeGroups={this.onChangeGroups}\n            setPopout={this.setPopout}\n            go={this.go}\n            openModal={this.openModal}\n            state={this.state}\n          />\n\n          <Groups\n            id=\"groups\"\n            state={this.state}\n            setPopout={this.setPopout}\n            go={this.go}\n            openCatalog={this.openCatalog}\n          />\n          <Catalog\n            id=\"catalog\"\n            state={this.state}\n            setPopout={this.setPopout}\n            openModal={this.openModal}\n            go={this.go}\n            goGroup={this.goGroup}\n            onChangeGroups={this.onChangeGroups}\n            chooseSection={this.chooseSection}\n          />\n          <SectionCatalog\n            id=\"sectionCatalog\"\n            goGroup={this.goGroup}\n            state={this.state}\n            setPopout={this.setPopout}\n            openModal={this.openModal}\n            onChangeGroups={this.onChangeGroups}\n            go={this.go}\n          />\n\n          <GroupInfo\n            id=\"group\"\n            onChangeGroups={this.onChangeGroups}\n            openModal={this.openModal}\n            go={this.go}\n            setPopout={this.setPopout}\n            state={this.state}\n          />\n\n        </View>\n        <View id=\"friends\" activePanel={activePanel} popout={popout} modal={\n          <ModalRoot activeModal={this.state.activeModal}>\n            <ModalPage id='bullet_to_friend' onClose={() => this.setState({ activeModal: null })} header={<ModalPageHeader right={IS_PLATFORM_IOS && <PanelHeaderButton onClick={() => this.setState({ activeModal: null})}><Icon24Dismiss /></PanelHeaderButton>} left={IS_PLATFORM_ANDROID && <PanelHeaderButton onClick={() => this.setState({ activeModal: null})}><Icon24Cancel /></PanelHeaderButton>}>{\"Календарь низких цен\"}</ModalPageHeader>} dynamicContentHeight>\n            {friend == null ? <Spinner />:(\n              <SimpleCell disabled\n                          before={<Avatar src={friend.photo_200}/>}\n                          description={friend.city.title }>{friend.first_name+\" \"+friend.last_name}</SimpleCell>\n            )\n            }\n            \n            {calendar && \n            <div className=\"container\" style={{ paddingLeft: 12, paddingRight: 12}}>\n                {Object.keys(calendar).map((name, day) => \n                <div size='s' className=\"container__item\">\n                  <div align='center'>\n                    <SimpleCell \n                        description={calendar[name].price+\" RUB\"} \n                        target=\"_blank\" \n                        href={\"https://www.aviasales.ru/search?origin_iata=\" + calendar[name].origin + \"&destination_iata=\" + calendar[name].destination + \"&depart_date=\" + calendar[name].departure_at.split('T')[0] + \"&return_date=\" + calendar[name].return_at.split('T')[0] + \"&locale=ru&currency=RUB&with_request=true&adults=1&children=0&infants=0&trip_class=0&expected_price=\"+calendar[name].price+\"&one_way=false&marker=\" + this.state.marker}\n                    >{name.split('-')[2]+\".\"+name.split('-')[1]+\".\"+name.split('-')[0]}</SimpleCell>\n                  </div>\n                </div>\n                )}\n            </div>\n            }\n            \n\n          </ModalPage>\n          </ModalRoot>\n        }>\n          <Friends\n            id=\"home\"\n            state={this.state}\n            setPopout={this.setPopout}\n            go={this.go}\n            openModal={this.openModal}\n            onChangeGroups={this.onChangeGroups}\n          />\n          <ChooseCity\n            id='chooseCity'\n            default={defaultCountry}\n            text={chooseCountryText}\n            changeFunction={this.chooseGlobal}\n            changeDefaultName={changeDefaultName}\n            state={this.state}\n            back={() => this.setState({ activePanel: 'home' })}\n          />  \n        </View>\n        <View id=\"aviasales\" activePanel={activePanel} popout={popout}>\n          <Panel id=\"home\"></Panel>\n        </View>\n      </Epic>\n      </ConfigProvider>\n    )\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport * as eruda from 'eruda';\nimport * as erudaCode from 'eruda-code';\nimport * as erudaDom from 'eruda-dom';\nimport bridge from '@vkontakte/vk-bridge'\nimport '@vkontakte/vkui/dist/vkui.css';\n \nimport './main.css';\nimport './style.css';\n\nbridge.send(\"VKWebAppInit\", {})\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n\n\neruda.init();\neruda.add(erudaCode);\neruda.add(erudaDom);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}